{% extends 'theme/template.html.twig' %}
{% trans_default_domain 'empresas' %}

{% block arrow %}<a href="{{ path('empresa_show') }}" style="color: black;" onclick="return confirm('{% trans from 'messages' %}TRANS_CONFIRM_RETURN{% endtrans %}')"><i class="icon-arrow-left52 mr-2"></i></a>{% endblock %}
{% block title %} {% trans %}TRANS_EMPRESA{% endtrans %} {% endblock %}
{% block subtitle %}
    {% if (app.request.get('id') is defined and app.request.get('id') is not empty ) %}
        {{ form.vars.value.empresa }}
    {% else %}
        {% trans from 'messages' %}TRANS_NUEVA{% endtrans %}
    {% endif %}
{% endblock %}

{% block card %}

    <style>
        .custom-file-label { opacity: 0; }
        .custom-file-input { opacity: 1; }
    </style>

    <script src="{{ asset('js/jquery.table2excel.js') }}"></script>
    <script src="{{ asset('jstree/jstree.min.js') }}"></script>
    <link href="{{ asset('jstree/themes/default/style.min.css') }}" rel="stylesheet" type="text/css">

    <script type="text/javascript">
        //Peticio 28/07/2023
        $(document).ready(function(){
            document.getElementById("empresa_guardar").addEventListener("click", function(event) {

                var urlActual = window.location.href;
                var textoBuscado = "empresa/new";
                if (urlActual.includes(textoBuscado)) {

                } else {
                    //Peticio 01/09/2023
                    //Mirar si hay registros en Tabla de cnae

                    var tabla2 = document.getElementById("cnae");
                    var mensajeNoRegistrosESP2 = "Sin registros.";
                    var mensajeNoRegistrosCAT2 = "Sense registres.";
                    // Buscar el mensaje de "No hay registros disponibles."
                    var mensajeEncontrado2 = false;
                    var filas2 = tabla2.getElementsByTagName("tr");
                    for (var i = 0; i < filas2.length; i++) {
                        var celdas2 = filas2[i].getElementsByTagName("td");
                        for (var j = 0; j < celdas2.length; j++) {
                            if (celdas2[j].textContent.trim() === mensajeNoRegistrosESP2 || celdas2[j].textContent.trim() === mensajeNoRegistrosCAT2) {
                                mensajeEncontrado2 = true;
                                break;
                            }
                        }
                    }
                    var auxSemafor2 = true;
                    if (mensajeEncontrado2) {
                            alert("Debes añadir un CNAE.");
                        auxSemafor2 = false;

                    } else {
                        console.log("La tabla contiene registros.");
                    }


                    //Mirar si hay registros en Tabla de centros de trabajo
                    var tabla = document.getElementById("centroTrabajoEmpresa");
                    var mensajeNoRegistrosESP = "Sin registros.";
                    var mensajeNoRegistrosCAT = "Sense registres.";
                    // Buscar el mensaje de "No hay registros disponibles."
                    var mensajeEncontrado = false;
                    var filas = tabla.getElementsByTagName("tr");
                    for (var i = 0; i < filas.length; i++) {
                        var celdas = filas[i].getElementsByTagName("td");
                        for (var j = 0; j < celdas.length; j++) {
                            if (celdas[j].textContent.trim() === mensajeNoRegistrosESP || celdas[j].textContent.trim() === mensajeNoRegistrosCAT) {
                                mensajeEncontrado = true;
                                break;
                            }
                        }
                    }
                    var auxSemafor = true;
                    if (mensajeEncontrado) {
                        if (document.getElementById("empresa_centroTrabajoTiene1").checked) {
                            alert("Debes añadir un centro de trabajo.");
                            auxSemafor = false;
                        }
                        else {
                            if (document.getElementById("empresa_centroTrabajoTiene2").checked) {
                                alert("Debes añadir mas de un centro de trabajo.");
                                auxSemafor = false;
                            }
                        }

                    } else {
                        console.log("La tabla contiene registros.");
                    }
                    event.preventDefault(); // Evita que se envíe el formulario por defecto

                    var opcionesSeleccionadas = 0;

                    // Verificar cuántos campos están seleccionados
                    if (document.getElementById("empresa_centroTrabajoDeslocalizado").checked) {
                        opcionesSeleccionadas++;
                    }
                    if (document.getElementById("empresa_centroTrabajoDeslocalizadoConstruccio").checked) {
                        opcionesSeleccionadas++;
                    }
                    if (document.getElementById("empresa_centroTrabajoTiene1").checked) {
                        opcionesSeleccionadas++;
                    }
                    if (document.getElementById("empresa_centroTrabajoTiene2").checked) {
                        opcionesSeleccionadas++;
                    }
                    var campoNombre = document.getElementById("empresa_empresa");
                    var valorNombre = campoNombre.value.trim();


                    // Verificar si al menos uno está seleccionado
                    if (opcionesSeleccionadas === 0) {
                        alert("Debes seleccionar al menos una opción de centro.");
                        auxSemafor = false;
                    } else if (opcionesSeleccionadas > 1) {
                        alert("Solo puedes seleccionar una opción de centros a la vez.");
                        auxSemafor = false;
                    }

                    if (auxSemafor === true && auxSemafor2 === true) {
                        // Si todas las condiciones son correctas, envía el formulario manualmente
                        document.getElementsByName("empresa")[0].submit();
                    }
                }

            });
            $('.summernote').summernote();

            var arrayDataTrabajadores = [];
            var arrayDataContratos = [];
            var arrayDataContratosCancelados = [];
            var arrayDataRenovaciones = [];
            var arrayDataPagos = [];
            var arrayDataFacturacion = [];
            var arrayDataDatosBancarios = [];
            var arrayDataNotificaciones = [];
            var arrayDataCertificaciones = [];
            var arrayDataTarifasPrl = [];
            var arrayDataTarifasRevisionesMedicas = [];
            var arrayDataModelo347 = [];
            var arrayDataManualVs = [];

            $.extend( $.fn.dataTable.defaults, {
                autoWidth: true,
                columnDefs: [{
                    width: 100,
                }],
                ordering: true,
                deferRender: false,
                dom: '<"datatable-header"fBl><"datatable-scroll-wrap"t><"datatable-footer"ip>',
                language: {
                    search: '<span>Filtrar:</span> _INPUT_',
                    searchPlaceholder: 'Escriba para filtrar...',
                    lengthMenu: '<span>Mostrar:</span> _MENU_',
                    paginate: { 'first': 'First', 'last': 'Last', 'next': $('html').attr('dir') == 'rtl' ? '&larr;' : '&rarr;', 'previous': $('html').attr('dir') == 'rtl' ? '&rarr;' : '&larr;' }
                },
            });

            {% for te in trabajadoresEmpresa %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                        {% if te.trabajador is not empty %}
                            actions += '<a href="{{ path('trabajador_update', { "id": te.trabajador.id }) }}" target="_blank" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                        {% endif %}
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                        actions += '<a href="#" data-id="{{ te.id }}" target="_self" class="list-icons-item eliminarTrabajador"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var trabajadorNombre = '';
                var trabajadorDni = '';
                {% if te.trabajador is not empty %}
                    trabajadorNombre = '{{ te.trabajador.nombre }}';
                    trabajadorDni = '{{ te.trabajador.dni }}';
                {% endif %}

                array.push(trabajadorNombre, trabajadorDni, actions);
                arrayDataTrabajadores.push(array);
            {% endfor %}

            $('.datatable-export-excel-trabajadores').DataTable({
                data: arrayDataTrabajadores,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportTrabajadorSn is defined and app.session.get('privilegiosRol').exportTrabajadorSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportTrabajadorSn != true %}
                    $('#datatable-trabajadores .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for contrato in contratos %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editContratoSn is defined and app.session.get('privilegiosRol').editContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editContratoSn %}
                        actions += '<a href="{{ path('contrato_update', { "id": contrato.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').addFacturacionSn is defined and app.session.get('privilegiosRol').addFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').addFacturacionSn and contrato.facturado == false %}
                        actions += '<a href="{{ path('contrato_empresa_facturar', { "id": contrato.id }) }}" class="list-icons-item" data-popup="tooltip" title="Facturar" data-container="body"><i class="icon-cash"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').printContratoSn is defined and app.session.get('privilegiosRol').printContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printContratoSn %}
                        {% if contrato.fichero_id is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": contrato.fichero_id, "tipo": "1" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                            {% if app.session.get('privilegiosRol').deleteGdocFileSn is defined and app.session.get('privilegiosRol').deleteGdocFileSn is not null %}
                                {% if app.session.get('privilegiosRol').deleteGdocFileSn %}
                                    actions += '<a href="#" data-id="{{ contrato.fichero_id }}" class="list-icons-item eliminarFicheroContrato" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                {% endif %}
                            {% endif %}
                        {% else %}
                            actions += '<a href="#" data-id="{{ contrato.id }}" class="list-icons-item selectContrato" data-toggle="modal" data-target="#modal_generate_contrato" data-popup="tooltip" title="Generar fichero" data-container="body"><i class="icon-file-plus"></i></a>';
                        {% endif %}
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteContratoSn is defined and app.session.get('privilegiosRol').deleteContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteContratoSn %}
                        actions += '<a href="{{ path('contrato_delete', { "id": contrato.id }) }}" class="list-icons-item" data-popup="tooltip" title="Eliminar" data-container="body" onclick="return confirm(\'{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}\')"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var renovado;
                {% if contrato.renovado == true %}
                    renovado = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    renovado = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                var tipo = '';
                {% if contrato.tipo is not empty %}
                    {% if contrato.tipoid == 1 %}
                        tipo = '<span class="badge badge-success">{{ contrato.tipo }}</span>';
                    {% elseif contrato.tipoid == 2 %}
                        tipo = '<span class="badge badge-primary">{{ contrato.tipo }}</span>';
                    {% elseif contrato.tipoid == 3 %}
                        tipo = '<span class="badge badge-danger">{{ contrato.tipo }}</span>';
                    {% else %}
                        tipo = '<span class="badge badge-info">{{ contrato.tipo }}</span>';
                    {% endif %}
                {% endif %}

                var input = '';
                {% if contrato.fichero_id is not null %}
                    input = '<div class="uniform-checker" id="uniform-{{ contrato.id }}"><span><input type="checkbox" name="contrato" id="{{ contrato.id }}" class="form-check-input-styled form-check-input" value="1" /></span></div>';
                {% endif %}

                var enviado = '';
                {% if contrato.enviado == true %}
                    enviado = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    enviado = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                var facturado = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% if contrato.facturado == true %}
                    facturado = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% endif %}

                array.push(input, actions, '{{ contrato.contrato }}', tipo, '<span style="display:none;">{{ contrato.fechainiciotimestamp }}</span>{{ contrato.fechainicio }}', '<span style="display:none;">{{ contrato.fechavencimientotimestamp }}</span>{{ contrato.fechavencimiento }}', '{{ contrato.importe|number_format(2, ",", ".") }} €', facturado, enviado, '{{ contrato.fechaenvio }}');

                {% if contrato.cancelado == true %}
                    arrayDataContratosCancelados.push(array);
                {% else %}
                    arrayDataContratos.push(array);
                {% endif %}

            {% endfor %}

            $('.datatable-export-excel-contratos').DataTable({
                data: arrayDataContratos,
                order: [[4, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            $('.datatable-export-excel-contratos-cancelados').DataTable({
                data: arrayDataContratosCancelados,
                order: [[4, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportContratoSn is defined and app.session.get('privilegiosRol').exportContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportContratoSn != true %}
                    $('#datatable-contratos .dt-buttons').css('display', 'none');
                    $('#datatable-contratos-cancelados .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for renovacion in renovaciones %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editRenovacionSn is defined and app.session.get('privilegiosRol').editRenovacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editRenovacionSn %}
                        actions += '<a href="{{ path('renovacion_update', { "id": renovacion.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').renovarRenovacionSn is defined and app.session.get('privilegiosRol').renovarRenovacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').renovarRenovacionSn %}
                        actions += '<a href="{{ path('renovacion_renovar', { 'id': renovacion.id }) }}" class="list-icons-item" data-popup="tooltip" title="Renovar" data-container="body"><i class="icon-file-plus"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').printContratoSn is defined and app.session.get('privilegiosRol').printContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printContratoSn %}
                        {% if renovacion.fichero_id is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": renovacion.fichero_id, "tipo": "1" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                        {% else %}
                            actions += '<a href="#" data-id="{{ renovacion.contratoid }}" class="list-icons-item selectContrato" data-toggle="modal" data-target="#modal_generate_contrato" data-popup="tooltip" title="Generar fichero" data-container="body"><i class="icon-printer2"></i></a>';
                        {% endif %}
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteRenovacionSn is defined and app.session.get('privilegiosRol').deleteRenovacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteRenovacionSn %}
                        actions += '<a href="{{ path('renovacion_delete', { "id": renovacion.id }) }}" class="list-icons-item" data-popup="tooltip" title="Eliminar" data-container="body" onclick="return confirm(\'{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}\');"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var renovado = null;
                var documentoRenovacion = null;

                {% if renovacion.renovado == true %}
                    renovado ='<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    renovado ='<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span></td>';
                {% endif %}

                {% if renovacion.documento_renovacion is not null %}
                    {% if renovacion.documento_renovacion == 1 %}
                        documentoRenovacion = '<span class="badge badge-info">{% trans from 'renovaciones' %}TRANS_RENOVADO_OP_1{% endtrans %}</span>';
                    {% elseif renovacion.documento_renovacion == 2 %}
                        documentoRenovacion = '<span class="badge badge-info">{% trans from 'renovaciones' %}TRANS_RENOVADO_OP_2{% endtrans %}</span>';
                    {% elseif renovacion.documento_renovacion == 3 %}
                        documentoRenovacion = '<span class="badge badge-info">{% trans from 'renovaciones' %}TRANS_RENOVADO_OP_3{% endtrans %}</span>';
                    {% elseif renovacion.documento_renovacion == 4 %}
                        documentoRenovacion = '<span class="badge badge-info">{% trans from 'renovaciones' %}TRANS_RENOVADO_OP_4{% endtrans %}</span>';
                    {% endif %}
                {% endif %}

                array.push(actions, '{{ renovacion.fechainicio|date('d/m/Y') }}', '{{ renovacion.fechavencimiento|date('d/m/Y') }}', '{{ renovacion.contrato }}', renovado, documentoRenovacion);
                arrayDataRenovaciones.push(array);
            {% endfor %}

            $('.datatable-export-excel-renovaciones').DataTable({
                data: arrayDataRenovaciones,
                order: [[1, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportRenovacionSn is defined and app.session.get('privilegiosRol').exportRenovacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportRenovacionSn != true %}
                    $('#datatable-renovaciones .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for pago in pagos %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editPagoPendienteSn is defined and app.session.get('privilegiosRol').editPagoPendienteSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editPagoPendienteSn %}
                        actions += '<a href="{{ path('pago_pendiente_update', { "id": pago.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deletePagoPendienteSn is defined and app.session.get('privilegiosRol').deletePagoPendienteSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deletePagoPendienteSn %}
                        actions += '<a href="{{ path('pago_pendiente_delete', { "id": pago.id }) }}" class="list-icons-item" data-popup="tooltip" title="Eliminar" data-container="body" onclick="return confirm(\'{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}\');"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var facturado = null;
                var vencimiento = null;

                {% if pago.facturado == true %}
                    facturado = '<span class="badge badge-success">{% trans from 'pagopendiente' %}TRANS_FACTURADO{% endtrans %}</span>';
                {% else %}
                    {% if date("now"|date('Y-m-d')) > date(pago.vencimiento|date('Y-m-d')) %}
                        facturado = '<span class="badge badge-danger">{% trans from 'pagopendiente' %}TRANS_VENCIDO{% endtrans %}</span>';
                    {% else %}
                        facturado = '<span class="badge badge-secondary">{% trans from 'pagopendiente' %}TRANS_PENDIENTE{% endtrans %}</span>';
                    {% endif %}
                {% endif %}

                {% if pago.vencimiento is not null %}
                    vencimiento = '{{ pago.vencimiento|date('d/m/Y') }}';
                {% endif %}

                array.push(actions, '{{ pago.contrato }}', facturado, vencimiento, '{{ pago.importe_iva|number_format(2, ",", ".") }} €', '{{ pago.importe_total|number_format(2, ",", ".") }} €');
                arrayDataPagos.push(array);
            {% endfor %}

            $('.datatable-export-excel-pagos').DataTable({
                data: arrayDataPagos,
                order: [[3, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportPagoPendienteSn is defined and app.session.get('privilegiosRol').exportPagoPendienteSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportPagoPendienteSn != true %}
                    $('#datatable-pagos .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for factura in facturas %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editFacturacionSn is defined and app.session.get('privilegiosRol').editFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editFacturacionSn %}
                        actions += '<a href="{{ path('factura_update', { "id": factura.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').editFacturacionSn is defined and app.session.get('privilegiosRol').editFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editFacturacionSn %}
                        {% if factura.serie != 'B' %}
                            actions += '<a href="#" data-id="{{ factura.id }}" class="list-icons-item selectAbonoFactura" data-popup="tooltip" title="Realizar abono" data-container="body" data-toggle="modal" data-target="#modal_realizar_abono_factura"><i class="icon-paste"></i></a>';
                        {% endif %}
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').printFacturacionSn is defined and app.session.get('privilegiosRol').printFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printFacturacionSn %}
                        {% if factura.fichero_id is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": factura.fichero_id, "tipo": "2" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                                {% if app.session.get('privilegiosRol').deleteGdocFileSn is defined and app.session.get('privilegiosRol').deleteGdocFileSn is not null %}
                                    {% if app.session.get('privilegiosRol').deleteGdocFileSn %}
                                        actions += '<a href="#" data-id="{{ factura.fichero_id }}" class="list-icons-item eliminarFicheroFactura" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                    {% endif %}
                                {% endif %}
                        {% else %}
                            actions += '<a href="#" data-id="{{ factura.id }}" class="list-icons-item selectFactura" data-popup="tooltip" title="Generar fichero" data-container="body" data-toggle="modal" data-target="#modal_generate_factura"><i class="icon-file-plus"></i></a>';
                        {% endif %}
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteFacturacionSn is defined and app.session.get('privilegiosRol').deleteFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteFacturacionSn %}
                        actions += '<a href="{{ path('factura_delete', { "id": factura.id }) }}" class="list-icons-item" data-popup="tooltip" title="Eliminar" data-container="body" onclick="return confirm(\'{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}\')"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var input = null;
                var enviada = null;

                {% if factura.enviada == true %}
                    enviada = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    enviada = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                {% if factura.fichero_id is not null %}
                    input = '<div class="uniform-checker" id="uniform-{{ factura.id }}"><span><input type="checkbox" name="factura" id="{{ factura.id }}" class="form-check-input-styled form-check-input" value="1" /></span></div>';
                {% endif %}

                var tipo = '';
                {% if factura.revision == true %}
                    tipo = '<span class="badge" style="color: #fff; background-color: #F7DC6F;"><br/></span>';
                {% endif %}

                {% if factura.renovacion == true %}
                    tipo = '<span class="badge badge-danger"><br/></span>';
                {% endif %}

                {% if factura.revision == false and factura.renovacion == false %}
                    tipo = '';
                {% endif %}

                array.push(input, actions, tipo, '<span style="display:none;">{{ factura.fechatimestamp }}</span>{{ factura.fecha }}', '{{ factura.factura }}', '{{ factura.facturaRectificativa }}', '{{ factura.formapago }}', '{{ factura.importe|number_format(2, ",", ".") }} €', enviada, '{{ factura.fechaenvio }}');
                arrayDataFacturacion.push(array);
            {% endfor %}

            $('.datatable-export-excel-facturas').DataTable({
                data: arrayDataFacturacion,
                order: [[3, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportFacturacionSn is defined and app.session.get('privilegiosRol').exportFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportFacturacionSn != true %}
                    $('#datatable-facturas .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for datosbancario in datosBancarios %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editDatosBancariosSn is defined and app.session.get('privilegiosRol').editDatosBancariosSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editDatosBancariosSn %}
                        actions += '<a href="{{ path('datos_bancarios_update', { "id": datosbancario.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteDatosBancariosSn is defined and app.session.get('privilegiosRol').deleteDatosBancariosSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteDatosBancariosSn %}
                        actions += '<a href="{{ path('datos_bancarios_delete', { "id": datosbancario.id }) }}" class="list-icons-item" data-popup="tooltip" title="Eliminar" data-container="body" onclick="return confirm(\'{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}\')"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var entidad = '';
                var principal = '';

                {% if datosbancario.entidadBancaria is not null %}
                    entidad = '{{ datosbancario.entidadBancaria.descripcion }}';
                {% endif %}

                {% if datosbancario.principal == true %}
                    principal = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    principal = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                array.push(actions, entidad, principal);
                arrayDataDatosBancarios.push(array);
            {% endfor %}

            $('.datatable-export-excel-datos-bancarios').DataTable({
                data: arrayDataDatosBancarios,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportDatosBancariosSn is defined and app.session.get('privilegiosRol').exportDatosBancariosSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportDatosBancariosSn != true %}
                    $('#datatable-datos-bancarios .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for notificacion in notificaciones %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').printNotificacionSn is defined and app.session.get('privilegiosRol').printNotificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printNotificacionSn %}
                        {% if notificacion.fichero is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": notificacion.fichero.id, "tipo": "3" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                                {% if app.session.get('privilegiosRol').deleteNotificacionSn is defined and app.session.get('privilegiosRol').deleteNotificacionSn is not null %}
                                    {% if app.session.get('privilegiosRol').deleteNotificacionSn %}
                                        actions += '<a href="#" data-id="{{ notificacion.fichero.id }}" class="list-icons-item eliminarFicheroNotificacion" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                    {% endif %}
                                {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}

                actions += '</div>';

                {% if notificacion.fichero is not null %}
                    input = '<div class="uniform-checker" id="uniform-{{ notificacion.id }}"><span><input type="checkbox" name="notificacion" id="{{ notificacion.id }}" class="form-check-input-styled form-check-input" value="1" /></span></div>';
                {% endif %}

                {% if notificacion.enviada == true %}
                    enviada = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    enviada = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                var fechaEnvio = '';
                {% if notificacion.fechaEnvio is not null %}
                    fechaEnvio = '{{ notificacion.fechaEnvio|date('d/m/Y') }}';
                {% endif %}

                array.push(input, actions, '{{ notificacion.fichero.plantilla.nombre }}', enviada, fechaEnvio);
                arrayDataNotificaciones.push(array);
            {% endfor %}

            $('.datatable-export-excel-notificaciones').DataTable({
                data: arrayDataNotificaciones,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportNotificacionSn is defined and app.session.get('privilegiosRol').exportNotificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportNotificacionSn != true %}
                    $('#datatable-notificaciones .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for certificacion in certificaciones %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').printCertificacionSn is defined and app.session.get('privilegiosRol').printCertificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printCertificacionSn %}
                        {% if certificacion.fichero is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": certificacion.fichero.id, "tipo": "4" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                            {% if app.session.get('privilegiosRol').deleteCertificacionSn is defined and app.session.get('privilegiosRol').deleteCertificacionSn is not null %}
                                {% if app.session.get('privilegiosRol').deleteCertificacionSn %}
                                    actions += '<a href="#" data-id="{{ certificacion.fichero.id }}" class="list-icons-item eliminarFicheroCertificacion" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}

                actions += '</div>';

                {% if certificacion.fichero is not null %}
                    input = '<div class="uniform-checker" id="uniform-{{ certificacion.id }}"><span><input type="checkbox" name="certificacion" id="{{ certificacion.id }}" class="form-check-input-styled form-check-input" value="1" /></span></div>';
                {% endif %}

                {% if certificacion.enviada == true %}
                    enviada = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    enviada = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                var fechaEnvio = '';
                {% if certificacion.fechaEnvio is not null %}
                    fechaEnvio = '{{ certificacion.fechaEnvio|date('d/m/Y') }}';
                {% endif %}

                array.push(input, actions, '{{ certificacion.fichero.plantilla.nombre }}', enviada, fechaEnvio);
                arrayDataCertificaciones.push(array);
            {% endfor %}

            $('.datatable-export-excel-certificaciones').DataTable({
                data: arrayDataCertificaciones,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportCertificacionSn is defined and app.session.get('privilegiosRol').exportCertificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportCertificacionSn != true %}
                    $('#datatable-certificaciones .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for tarifaPrl in tarifasPrl %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editTarifaSn is defined and app.session.get('privilegiosRol').editTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editTarifaSn %}
                        actions += '<a href="#" onclick="recuperaTarifa({{ tarifaPrl.id }}, 1);" data-toggle="modal" data-target="#modal_editar_tarifa_prl" class="list-icons-item" target="_self" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteTarifaSn is defined and app.session.get('privilegiosRol').deleteTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteTarifaSn %}
                        actions += '<a href="#" data-id="{{ tarifaPrl.id }}" data-tipo="1" class="list-icons-item eliminarTarifa" target="_self" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                array.push(actions, '{{ tarifaPrl.concepto.descripcion }}', '{{ tarifaPrl.iva|number_format(2, ",", ".") }} €', '{{ tarifaPrl.importe|number_format(2, ",", ".") }} €');
                arrayDataTarifasPrl.push(array);
            {% endfor %}

            $('.datatable-export-excel-tarifas-prl').DataTable({
                data: arrayDataTarifasPrl,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportTarifaSn is defined and app.session.get('privilegiosRol').exportTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportTarifaSn != true %}
                    $('#datatable-tarifas-prl .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for tarifaRevisionesMedicas in tarifasRevisionesMedicas %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').editTarifaSn is defined and app.session.get('privilegiosRol').editTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').editTarifaSn %}
                        actions += '<a href="#" onclick="recuperaTarifa({{ tarifaRevisionesMedicas.id }}, 2);" data-toggle="modal" data-target="#modal_editar_tarifa_revisiones" class="list-icons-item" target="_self" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                    {% endif %}
                {% endif %}

                {% if app.session.get('privilegiosRol').deleteTarifaSn is defined and app.session.get('privilegiosRol').deleteTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').deleteTarifaSn %}
                        actions += '<a href="#" data-id="{{ tarifaRevisionesMedicas.id }}" data-tipo="2" class="list-icons-item eliminarTarifa" target="_self" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>';
                    {% endif %}
                {% endif %}

                actions += '</div>';

                array.push(actions, '{{ tarifaRevisionesMedicas.concepto.descripcion }}', '{{ tarifaRevisionesMedicas.iva|number_format(2, ",", ".") }} €', '{{ tarifaRevisionesMedicas.importe|number_format(2, ",", ".") }} €');
                arrayDataTarifasRevisionesMedicas.push(array);
            {% endfor %}

            $('.datatable-export-excel-tarifas-revisiones').DataTable({
                data: arrayDataTarifasRevisionesMedicas,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportTarifaSn is defined and app.session.get('privilegiosRol').exportTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportTarifaSn != true %}
                    $('#datatable-tarifas-revisiones .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for m347 in modelo347Empresa %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').printModelo347Sn is defined and app.session.get('privilegiosRol').printModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printModelo347Sn %}
                        {% if m347.fichero is not null %}
                            actions += '<a href="{{ path('gdoc_open_file', { "fileId": m347.fichero.id, "tipo": "5" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                            {% if app.session.get('privilegiosRol').deleteModelo347Sn is defined and app.session.get('privilegiosRol').deleteModelo347Sn is not null %}
                                {% if app.session.get('privilegiosRol').deleteModelo347Sn %}
                                    actions += '<a href="#" data-id="{{ m347.fichero.id }}" class="list-icons-item eliminarFicheroModelo347" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}

                actions += '</div>';

                var input = '';
                {% if m347.fichero is not null %}
                    input = '<div class="uniform-checker" id="uniform-{{ m347.id }}"><span><input type="checkbox" name="modelo347" id="{{ m347.id }}" class="form-check-input-styled form-check-input" value="1" /></span></div>';
                {% endif %}

                {% if m347.enviada == true %}
                    enviada = '<span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>';
                {% else %}
                    enviada = '<span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>';
                {% endif %}

                var fechaEnvio = '';
                {% if m347.fechaEnvio is not null %}
                    fechaEnvio = '{{ m347.fechaEnvio|date('d/m/Y') }}';
                {% endif %}

                array.push(input, actions, '{{ m347.fichero.dtcrea|date('d/m/Y') }}', enviada, fechaEnvio);
                arrayDataModelo347.push(array);
            {% endfor %}

            $('.datatable-export-excel-modelo-347').DataTable({
                data: arrayDataModelo347,
                order: [[1, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportModelo347Sn is defined and app.session.get('privilegiosRol').exportModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportModelo347Sn != true %}
                    $('#datatable-modelo-347.dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            {% for mvs in manualVsEmpresa %}
                var array = [];
                var actions = '<div class="list-icons">';

                {% if app.session.get('privilegiosRol').printModelo347Sn is defined and app.session.get('privilegiosRol').printModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                    {% if app.session.get('privilegiosRol').printModelo347Sn %}
                        {% if mvs.fichero is not null %}
                        actions += '<a href="{{ path('gdoc_open_file', { "fileId": mvs.fichero.id, "tipo": "18" }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Imprimir" data-container="body"><i class="icon-printer2"></i></a>';
                            {% if app.session.get('privilegiosRol').deleteModelo347Sn is defined and app.session.get('privilegiosRol').deleteModelo347Sn is not null %}
                                {% if app.session.get('privilegiosRol').deleteModelo347Sn %}
                                    actions += '<a href="#" data-id="{{ mvs.fichero.id }}" class="list-icons-item eliminarFicheroManualVs" data-popup="tooltip" title="Eliminar fichero" data-container="body"><i class="icon-file-minus"></i></a>';
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}

                actions += '</div>';

                array.push(actions, '{{ mvs.fecha|date('d/m/Y') }}');
                arrayDataManualVs.push(array);
            {% endfor %}

            $('.datatable-export-excel-manualvs').DataTable({
                data: arrayDataManualVs,
                order: [[1, "desc"]],
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            {% if app.session.get('privilegiosRol').exportModelo347Sn is defined and app.session.get('privilegiosRol').exportModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                {% if app.session.get('privilegiosRol').exportModelo347Sn != true %}
                    $('#datatable-manualvs .dt-buttons').css('display', 'none');
                {% endif %}
            {% endif %}

            //Boton para añadir un tecnico
            $('#btnAddTecnico').click(function(){

                if($('#tecnico').val() == ''){
                    $('#tecnico').focus();
                    return false;
                }

                $('#btnAddTecnico').prop("disabled", true);
                $('#btnAddTecnico').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_tecnico') }}",
                    data: {
                        'tecnicoId': $('#tecnico').val(),
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaTecnicos();

                            $('#btnAddTecnico').prop("disabled", false);
                            $('#btnAddTecnico').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                            $('#tecnico').val("").change();

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddTecnico').prop("disabled", false);
                        $('#btnAddTecnico').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton para editar el tecnico
            $('#btnUpdateTecnico').click(function(){

                if($('#tecnicoEditar').val() == ''){
                    $('#tecnicoEditar').focus();
                    return false;
                }

                $('#btnUpdateTecnico').prop("disabled", true);
                $('#btnUpdateTecnico').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_update_tecnico') }}",
                    data: {
                        'tecnicoId': $('#tecnicoEditar').val(),
                        'tecnicoEmpresaId': $('#tecnicoEmpresaId').val()
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaTecnicos();

                            $('#btnUpdateTecnico').prop("disabled", false);
                            $('#btnUpdateTecnico').html("Guardar");

                            $('#tecnicoEditar').val("").change();

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnUpdateTecnico').prop("disabled", false);
                        $('#btnUpdateTecnico').html("Guardar");
                    }
                });
            });

            //Boton para añadir un correo
            $('#btnAddCorreo').click(function(){

                if($('#email').val() == ''){
                    $('#email').focus();
                    return false;
                }

                $('#btnAddCorreo').prop("disabled", true);
                $('#btnAddCorreo').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_email') }}",
                    data: {
                        'email': $('#email').val(),
                        'funcion': $('#funcion').val(),
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "EXISTE"){
                            $('#btnAddCorreo').prop("disabled", false);
                            $('#btnAddCorreo').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_ATENCION{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_CORREO_EMPRESA_EXISTE{% endtrans %}',
                                icon: 'icon-warning22',
                                type: 'warning'
                            });
                        }

                        if(data == "OK"){

                            recuperaEmails();

                            $('#btnAddCorreo').prop("disabled", false);
                            $('#btnAddCorreo').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                            $('#email').val("");
                            $('#funcion').val("").change();

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddCorreo').prop("disabled", false);
                        $('#btnAddCorreo').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton para editar el correo
            $('#btnUpdateCorreo').click(function(){

                if($('#emailEditar').val() == ''){
                    $('#emailEditar').focus();
                    return false;
                }

                $('#btnUpdateCorreo').prop("disabled", true);
                $('#btnUpdateCorreo').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_update_email') }}",
                    data: {
                        'email': $('#emailEditar').val(),
                        'funcion': $('#funcionEditar').val(),
                        'correoEmpresaId': $('#correoEmpresaIdEditar').val()
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaEmails();

                            $('#btnUpdateCorreo').prop("disabled", false);
                            $('#btnUpdateCorreo').html("Guardar");

                            $('#emailEditar').val("");
                            $('#funcionEditar').val("").change();

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnUpdateCorreo').prop("disabled", false);
                        $('#btnUpdateCorreo').html("Guardar");
                    }
                });
            });

            //Boton para añadir un cnae
            $('#btnAddCnae').click(function(){

                if($('#cnaeValor').val() == ''){
                    $('#cnaeValor').focus();
                    return false;
                }

                $('#btnAddCnae').prop("disabled", true);
                $('#btnAddCnae').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_cnae') }}",
                    data: {
                        'cnaeId': $('#cnaeValor').val(),
                        'principal': $('#principal').is(':checked'),
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaCnaes();

                            $('#btnAddCnae').prop("disabled", false);
                            $('#btnAddCnae').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                            $('#cnaeValor').val("").change();
                            $('#funcion').val("");

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddCnae').prop("disabled", false);
                        $('#btnAddCnae').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton para editar un cnae
            $('#btnUpdateCnae').click(function(){

                if($('#cnaeValorEditar').val() == ''){
                    $('#cnaeValorEditar').focus();
                    return false;
                }

                $('#btnUpdateCnae').prop("disabled", true);
                $('#btnUpdateCnae').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_update_cnae') }}",
                    data: {
                        'cnaeId': $('#cnaeValorEditar').val(),
                        'principal': $('#principalEditar').is(':checked'),
                        'cnaeEmpresaId': $('#cnaeEmpresaIdEditar').val()
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaCnaes();

                            $('#btnUpdateCnae').prop("disabled", false);
                            $('#btnUpdateCnae').html("Guardar");

                            $('#cnaeValorEditar').val("").change();
                            $('#principalEditar').val("");

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnUpdateCnae').prop("disabled", false);
                        $('#btnUpdateCnae').html("Guardar");
                    }
                });
            });

            // Format displayed data
            function formatRepo (repo) {
                if (repo.loading) return repo.text;

                var markup = '<div class="clearfix">' +
                    '<div>' + repo.descripcion + '</div>' +
                    '</div>';

                return markup;
            }

            // Format selection
            function formatRepoSelection (repo) {
                return repo.full_name || repo.text;
            }

            // Initialize
            $('.js_busca_ajax_centro').select2({
                ajax: {
                    url: "{{ path('busca_ajax_query',{ 'option': 'centroTrabajo' }) }}",
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term, // search term
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {

                        var select2Data = $.map(JSON.parse(data), function (obj) {
                            obj.id = parseInt(obj.id);
                            obj.text = obj.descripcion;

                            return obj;
                        });

                        return {
                            results: select2Data
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 3,
                templateResult: formatRepo, // omitted for brevity, see the source of this page
                templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
            });

            $('.js_busca_ajax_trabajador').select2({
                ajax: {
                    url: "{{ path('busca_ajax_query',{ 'option': 'trabajadorEmpresa' }) }}",
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        return {
                            q: params.term, // search term
                            page: params.page
                        };
                    },
                    processResults: function (data, params) {

                        var select2Data = $.map(JSON.parse(data), function (obj) {
                            obj.id = parseInt(obj.id);
                            obj.text = obj.descripcion;

                            return obj;
                        });

                        return {
                            results: select2Data
                        };
                    },
                    cache: true
                },
                escapeMarkup: function (markup) { return markup; }, // let our custom formatter work
                minimumInputLength: 3,
                templateResult: formatRepo, // omitted for brevity, see the source of this page
                templateSelection: formatRepoSelection // omitted for brevity, see the source of this page
            });

            //Boton para añadir un centro de trabajo
            $('#btnAddCentroTrabajoEmpresa').click(function(){

                if($('#centroTrabajo').val() == ''){
                    $('#centroTrabajo').focus();
                    return false;
                }

                $('#btnAddCentroTrabajoEmpresa').prop("disabled", true);
                $('#btnAddCentroTrabajoEmpresa').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_centro_trabajo_empresa') }}",
                    data: {
                        'centroTrabajoId': $('#centroTrabajo').val(),
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            recuperaCentroTrabajo();

                            $('#btnAddCentroTrabajoEmpresa').prop("disabled", false);
                            $('#btnAddCentroTrabajoEmpresa').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                            $('#btnAddCentroTrabajoEmpresa').val("").change();

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_AÑADIDO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddCentroTrabajoEmpresa').prop("disabled", false);
                        $('#btnAddCentroTrabajoEmpresa').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton para añadir un trabajador
            $('#btnAddTrabajador').click(function(){

                if($('#trabajadorEmpresa').val() == ''){
                    $('#trabajadorEmpresa').focus();
                    return false;
                }

                $('#btnAddTrabajador').prop("disabled", true);
                $('#btnAddTrabajador').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_trabajador_empresa') }}",
                    data: {
                        'trabajadorId': $('#trabajadorEmpresa').val(),
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddTrabajador').prop("disabled", false);
                        $('#btnAddTrabajador').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });

            });

            //Validación del CIF de empresa
            $('#empresa_cif').keyup(function(){
                var cif = $(this).val();
                if(isValidCif(cif)){
                    $.ajax({
                        type: "POST",
                        url: "{{ path('empresa_comprueba_cif') }}",
                        data: {
                            'cif': cif,
                            'empresaId': '{{ app.request.get('id') }}'
                        },
                        dataType: "JSON",
                        success: function (data) {
                            if(data == "1"){
                                $('#empresa_cif').removeClass('border-success');
                                $('#empresa_cif').addClass('border-danger');
                                $('.incorrectoCif').css('display', 'block');
                                $('.incorrectoCif').html('{% trans %}TRANS_ERROR_CIF_EXISTE{% endtrans %}');
                            }else{
                                $('#empresa_cif').removeClass('border-danger');
                                $('#empresa_cif').addClass('border-success');
                                $('.incorrectoCif').css('display', 'none');
                            }
                        },
                        error: function(){
                            new PNotify({
                                title: 'Ops!',
                                text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                                icon: 'icon-blocked',
                                type: 'error'
                            });
                        }
                    });
                }else{
                    $(this).removeClass('border-success');
                    $(this).addClass('border-danger');
                    $('.incorrectoCif').html('{% trans %}TRANS_ERROR_CIF{% endtrans %}');
                    $('.incorrectoCif').css('display', 'block');
                }

            });

            $('.form-check-input-switch').bootstrapSwitch();

            //Boton que genera el contrato
            $('#btnGeneraContrato').click(function(){

                $('#btnGeneraContrato').prop("disabled", true);
                $('#btnGeneraContrato').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaContrato').val(),
                        'id': $('#contratoId').val(),
                        'tipo': 1
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraContrato').prop("disabled", false);
                            $('#btnGeneraContrato').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraContrato').prop("disabled", false);
                        $('#btnGeneraContrato').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            //Boton que genera la facturas
            $('#btnGeneraFactura').click(function(){

                $('#btnGeneraFactura').prop("disabled", true);
                $('#btnGeneraFactura').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaFactura').val(),
                        'id': $('#facturaId').val(),
                        'tipo': 2
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraFactura').prop("disabled", false);
                            $('#btnGeneraFactura').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraFactura').prop("disabled", false);
                        $('#btnGeneraFactura').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            //Boton que genera la notificacion
            $('#btnGeneraNotificacion').click(function(){

                $('#btnGeneraNotificacion').prop("disabled", true);
                $('#btnGeneraNotificacion').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaNotificacion').val(),
                        'id': '',
                        'tipo': 3
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraNotificacion').prop("disabled", false);
                            $('#btnGeneraNotificacion').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraNotificacion').prop("disabled", false);
                        $('#btnGeneraNotificacion').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            //Boton que genera la certificacion
            $('#btnGeneraCertificacion').click(function(){

                $('#btnGeneraCertificacion').prop("disabled", true);
                $('#btnGeneraCertificacion').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaCertificacion').val(),
                        'id': '',
                        'tipo': 4
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraCertificacion').prop("disabled", false);
                            $('#btnGeneraCertificacion').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraCertificacion').prop("disabled", false);
                        $('#btnGeneraCertificacion').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            //Botón que copia la direccion postal
            $('#btnCopyDireccion').click(function(){
                $('#empresa_domicilioFiscal').val($('#empresa_domicilioPostal').val());
                $('#empresa_localidadFiscal').val($('#empresa_localidadPostal').val());
                $('#empresa_codigoPostalFiscal').val($('#empresa_codigoPostalPostal').val());
                $('#empresa_provinciaFiscal').val($('#empresa_provinciaPostal').val());
                $('#empresa_provinciaFiscalSerpa').val($('#empresa_provinciaPostalSerpa').val()).change();
                $('#empresa_municipioFiscalSerpa').val($('#empresa_municipioPostalSerpa').val()).change();
            });

            //Boton que crea la tarifa prl
            $('#btnAddTarifaPrl').click(function(){

                var conceptoTarifaPrlTd = $('#listConceptoTarifaPrl').val();
                var total = $('#totalTarifaPrl').val();
                var iva = $('#ivaTarifaPrl').val();

                if(conceptoTarifaPrlTd == ""){
                    $('#listConceptoTarifaPrl').focus();
                    return false;
                }

                $('#btnAddTarifaPrl').prop("disabled", true);
                $('#btnAddTarifaPrl').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_tarifa') }}",
                    data: {
                        'conceptoId': conceptoTarifaPrlTd,
                        'iva': iva,
                        'total': total,
                        'tipo': 1
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddTarifaPrl').prop("disabled", false);
                        $('#btnAddTarifaPrl').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton que modifica la tarifa prl
            $('#btnEditTarifaPrl').click(function(){

                var tarifaPrlId = $('#idTarifaPrl').val();
                var conceptoTarifaPrlTd = $('#listConceptoTarifaPrlEditar').val();
                var total = $('#totalTarifaPrlEditar').val();
                var iva = $('#ivaTarifaPrlEditar').val();

                if(conceptoTarifaPrlTd == ""){
                    $('#listConceptoTarifaPrlEditar').focus();
                    return false;
                }

                $('#btnEditTarifaPrl').prop("disabled", true);
                $('#btnEditTarifaPrl').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_edit_tarifa') }}",
                    data: {
                        'tarifaId': tarifaPrlId,
                        'conceptoId': conceptoTarifaPrlTd,
                        'iva': iva,
                        'total': total,
                        'tipo': 1
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnEditTarifaPrl').prop("disabled", false);
                        $('#btnEditTarifaPrl').html("Guardar");
                    }
                });
            });

            //Boton que crea la tarifa revisiones
            $('#btnAddTarifaRevisiones').click(function(){

                var conceptoTarifaRevisionesTd = $('#listConceptoTarifaRevisiones').val();
                var total = $('#totalTarifaRevisiones').val();
                var iva = $('#ivaTarifaRevisiones').val();

                if(conceptoTarifaRevisionesTd == ""){
                    $('#listConceptoTarifaRevisiones').focus();
                    return false;
                }

                $('#btnAddTarifaRevisiones').prop("disabled", true);
                $('#btnAddTarifaRevisiones').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_add_tarifa') }}",
                    data: {
                        'conceptoId': conceptoTarifaRevisionesTd,
                        'iva': iva,
                        'total': total,
                        'tipo': 2
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddTarifaRevisiones').prop("disabled", false);
                        $('#btnAddTarifaRevisiones').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Boton que modificar la tarifa revisiones
            $('#btnEditTarifaRevisiones').click(function(){

                var tarifaRevisionesId = $('#idTarifaRevisiones').val();
                var conceptoTarifaRevisionesTd = $('#listConceptoTarifaRevisionesEditar').val();
                var total = $('#totalTarifaRevisionesEditar').val();
                var iva = $('#ivaTarifaRevisionesEditar').val();

                if(conceptoTarifaRevisionesTd == ""){
                    $('#listConceptoTarifaRevisionesEditar').focus();
                    return false;
                }

                $('#btnEditTarifaRevisiones').prop("disabled", true);
                $('#btnEditTarifaRevisiones').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_edit_tarifa') }}",
                    data: {
                        'tarifaId': tarifaRevisionesId,
                        'conceptoId': conceptoTarifaRevisionesTd,
                        'iva': iva,
                        'total': total,
                        'tipo': 2
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnEditTarifaRevisiones').prop("disabled", false);
                        $('#btnEditTarifaRevisiones').html("Guardar");
                    }
                });
            });

            var now = new Date();
            var month = (now.getMonth() + 1);
            var day = now.getDate();
            if (month < 10)
                month = "0" + month;
            if (day < 10)
                day = "0" + day;
            var today = now.getFullYear() + '-' + month + '-' + day;
            $('#fechaAbonoFactura').val(today);

            //Boton que modificar la tarifa revisiones
            $('#btnRealizarAbonoFactura').click(function(){

                var id = $('#idFacturaAbono').val();
                var fecha = $('#fechaAbonoFactura').val();

                $('#btnRealizarAbonoFactura').prop("disabled", true);
                $('#btnRealizarAbonoFactura').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_REALIZAR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('factura_generar_abono') }}",
                    data: {
                        'id': id,
                        'fecha': fecha,
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnRealizarAbonoFactura').prop("disabled", false);
                        $('#btnRealizarAbonoFactura').html("{% trans from 'messages' %}TRANS_REALIZAR{% endtrans %}");
                    }
                });
            });

            //Boton que lleva a la pagina de enviar contratos
            $('#btnEnviaContratos').click(function(){
                if(arrayContratos.length == 0){
                    new PNotify({
                        title: '{% trans from 'messages' %}TRANS_ATENCION{% endtrans %}',
                        text: '{% trans from "messages" %}TRANS_AVISO_NO_CONTRATO{% endtrans %}',
                        icon: 'icon-warning22',
                        type: 'warning'
                    });
                }else{
                    $('#btnEnviaContratos').prop("disabled", true);
                    $('#btnEnviaContratos').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'contratos' %}TRANS_ENVIAR_CONTRATO{% endtrans %}");
                    location.href = '{{ path('contrato_send_contrato') }}?contratos='+arrayContratos;
                }
            });

            //Boton que lleva a la pagina de enviar facturas
            $('#btnEnviaFactura').click(function(){
                if(arrayFacturas.length == 0){
                    new PNotify({
                        title: '{% trans from 'messages' %}TRANS_ATENCION{% endtrans %}',
                        text: '{% trans from "messages" %}TRANS_AVISO_NO_FACTURA{% endtrans %}',
                        icon: 'icon-warning22',
                        type: 'warning'
                    });
                }else{
                    $('#btnEnviaFactura').prop("disabled", true);
                    $('#btnEnviaFactura').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'facturacion' %}TRANS_ENVIAR_FACTURA{% endtrans %}");
                    location.href = '{{ path('factura_send_factura') }}?facturas='+arrayFacturas;
                }
            });

            //Boton que lleva a la pagina de enviar la notificacion
            $('#btnEnviaNotificacion').click(function(){
                if(arrayNotificaciones.length == 0){
                    new PNotify({
                        title: '{% trans from 'messages' %}TRANS_ATENCION{% endtrans %}',
                        text: '{% trans from "messages" %}TRANS_AVISO_NO_NOTIFICACION{% endtrans %}',
                        icon: 'icon-warning22',
                        type: 'warning'
                    });
                }else{
                    $('#btnEnviaNotificacion').prop("disabled", true);
                    $('#btnEnviaNotificacion').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans %}TRANS_ENVIAR_NOTIFICACION{% endtrans %}");
                    location.href = '{{ path('empresa_send_notificacion') }}?notificaciones='+arrayNotificaciones;
                }
            });

            //Boton que lleva a la pagina de enviar la certificacion
            $('#btnEnviaCertificacion').click(function(){
                if(arrayCertificacion.length == 0){
                    new PNotify({
                        title: '{% trans from 'messages' %}TRANS_ATENCION{% endtrans %}',
                        text: '{% trans from "messages" %}TRANS_AVISO_NO_CERTIFICACION{% endtrans %}',
                        icon: 'icon-warning22',
                        type: 'warning'
                    });
                }else{
                    $('#btnEnviaCertificacion').prop("disabled", true);
                    $('#btnEnviaCertificacion').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans %}TRANS_ENVIAR_CERTIFICACION{% endtrans %}");
                    location.href = '{{ path('empresa_send_certificacion') }}?certificaciones='+arrayCertificacion;
                }
            });

            //Boton que lleva a la pagina de enviar el modelo 347
            $('#btnEnviaModelo347').click(function(){
                if(arrayModelo347.length == 0){
                    new PNotify({
                        title: '{% trans from 'messages' %}TRANS_ATENCION{% endtrans %}',
                        text: '{% trans from "messages" %}TRANS_AVISO_NO_MODELO347{% endtrans %}',
                        icon: 'icon-warning22',
                        type: 'warning'
                    });
                }else{
                    $('#btnEnviaModelo347').prop("disabled", true);
                    $('#btnEnviaModelo347').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans %}TRANS_ENVIAR_MODELO347{% endtrans %}");
                    location.href = '{{ path('empresa_send_modelo347') }}?modelo347='+arrayModelo347;
                }
            });

            //Boton que genera el modelo 347
            $('#btnGeneraModelo347').click(function(){

                $('#btnGeneraModelo347').prop("disabled", true);
                $('#btnGeneraModelo347').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaModelo347').val(),
                        'id': '',
                        'tipo': 5
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraModelo347').prop("disabled", false);
                            $('#btnGeneraModelo347').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraModelo347').prop("disabled", false);
                        $('#btnGeneraModelo347').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            //Boton que genera el manual vs
            $('#btnGeneraManualVs').click(function(){

                $('#btnGeneraManualVs').prop("disabled", true);
                $('#btnGeneraManualVs').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_generar_file') }}",
                    data: {
                        'plantillaId': $('#plantillaManualVs').val(),
                        'id': '',
                        'tipo': 18
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != ""){

                            $('#btnGeneraManualVs').prop("disabled", false);
                            $('#btnGeneraManualVs').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");

                            var w = window.open();
                            w.location = data.url;

                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnGeneraManualVs').prop("disabled", false);
                        $('#btnGeneraManualVs').html("{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}");
                    }
                });
            });

            var xhr;
            {% if tree is defined and tree is not empty %}
            console.log(tree);
            var json = {{ tree | raw }};
            var selected_id;

            function ControlViews() {
                selected_id = $("#tree").find(".jstree-clicked").attr('id');
                //Algun nodo selecionado.
                if (typeof selected_id != 'undefined' && selected_id != '') {
                    var remove = /_anchor$/;
                    selected_id = selected_id.replace(remove, "");
                    //FICHERO
                    if (selected_id.indexOf("fileId") == 0) {
                        selected_id = selected_id.replace("fileId", "");
                        plantillaAjaxRequest(selected_id);
                    }
                }
            }

            $(function () {
                $("#tree")
                    .jstree({
                        'core': {
                            'data': json,
                            'check_callback': true
                        },

                        'plugins': ["search", "sort", "state"]

                    })
                    .on('changed.jstree', function (e, data) {
                        if (xhr && xhr.readyState != 4) {
                            xhr.abort();
                        }
                        ControlViews();
                    })
                    .on('ready.jstree', function (e, data) {
                        var fileUploadedID = location.search.split('fileid=')[1];
                        //console.log(fileUploadedID);
                        if (typeof(fileUploadedID) != "undefined") {
                            var node = "fileId" + fileUploadedID;
                            $('#tree').jstree('deselect_all');
                            setTimeout(function(){
                                $('#tree').jstree('select_node', node);
                            },300);

                        }
                    });
            });

            //ControlViews();

            //Evento click carpeta
            $('#tree').on("select_node.jstree", function (e, data) {
                var carpetaId = data.node['id'];
                var modificarSn = data.node['modificar'];
                if(carpetaId != "" && !isNaN(carpetaId) && modificarSn){
                    $.ajax({
                        type: 'POST',
                        url: '{{ path('gdoc_recupera_carpeta') }}',
                        data: {
                            'id': carpetaId,
                            'tipo': 3
                        },
                        dataType: 'json',
                        success: function (response) {
                            $("#idCarpeta").val(response.id);
                            $("#nombreCarpetaEditar").val(response.nombre);
                            $("#carpetaPadreEditar").val(response.padre).change();
                            $('#modal_editar_carpeta').modal('show');
                        }
                    });
                }
            });
            {% endif %}

            function plantillaAjaxRequest(plantillaId) {

                $("#nombreFichero").val("");
                $("#fechaFichero").val("");
                $("#usuarioFichero").val("");
                $("#tipoFichero").val("");
                $("#midaFichero").val("");
                $("#idFichero").val("");
                $("#btnDownPlantilla").attr('href', "");
                $("#btnOpenPlantilla").attr('href', "");

                $('#modal_view_fichero').modal('show');

                var url = '{{ path('gdoc_plantilla_view') }}';

                $("#btnOpenPlantilla").hide();
                $("#btnDownPlantilla").hide();
                $('#btnDeletePlantilla').hide();

                var empresaId = '{{ app.request.get('id') }}';

                xhr = $.ajax({
                    type: 'POST',
                    url: url,
                    data: {
                        'id': plantillaId,
                        'tipo': 3,
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: 'json',
                    success: function (response) {
                        $("#nombreFichero").val(response.name);
                        $("#fechaFichero").val(response.fecha);
                        $("#usuarioFichero").val(response.usuario);
                        $("#tipoFichero").val(response.tipo);
                        $("#midaFichero").val(response.mida);
                        $("#idFichero").val(response.id);
                        $("#btnDownPlantilla").attr('href', '{{ path('gdoc_down_plantilla') }}?plantillaId='+response.down+'&tipo=3&empresaId='+empresaId);
                        $("#btnOpenPlantilla").attr('href', '{{ path('gdoc_open_plantilla') }}?plantillaId='+response.open+'&tipo=3&empresaId='+empresaId);

                        $("#btnDownPlantilla").show();
                        $("#btnOpenPlantilla").show();
                        $('#btnDeletePlantilla').show();
                    }
                });
            }

            //Boton que elimina el fichero seleccionado
            $('#btnDeletePlantilla').click(function(){

                $('#btnDeletePlantilla').prop("disabled", true);
                $('#btnDeletePlantilla').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_ELIMINAR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_plantilla_delete') }}",
                    data: {
                        'id': $('#idFichero').val(),
                        'tipo': 3
                    },
                    dataType: "JSON",
                    success: function (data) {

                        if(data == "OK"){

                            $('#btnDeletePlantilla').prop("disabled", false);
                            $('#btnDeletePlantilla').html("{% trans from 'messages' %}TRANS_ELIMINAR{% endtrans %}");

                            new PNotify({
                                title: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO{% endtrans %}',
                                text: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO_MSG{% endtrans %}',
                                icon: 'icon-checkmark3',
                                type: 'success'
                            });

                            setTimeout(function() {
                                location.reload();
                            }, 2000);

                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnDeletePlantilla').prop("disabled", false);
                        $('#btnDeletePlantilla').html("{% trans from 'messages' %}TRANS_ELIMINAR{% endtrans %}");
                    }
                });

            });

            //Botón que añade la nueva carpeta
            $('#btnAddCarpeta').click(function(){

                var nombreCarpeta = $('#nombreCarpeta').val();
                var carpetaPadre = $('#carpetaPadre').val();

                if(nombreCarpeta == "" || nombreCarpeta == null){
                    $('#nombreCarpeta').focus();
                    return false;
                }

                $('#btnAddCarpeta').prop("disabled", true);
                $('#btnAddCarpeta').html("<i class=\"icon-spinner2 spinner mr-2\"></i>{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_carpeta_add') }}",
                    data: {
                        'nombre': nombreCarpeta,
                        'padre': carpetaPadre,
                        'tipo': 3,
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnAddCarpeta').prop("disabled", false);
                        $('#btnAddCarpeta').html("{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}");
                    }
                });
            });

            //Botón que modifica la carpeta seleccionada
            $('#btnUpdateCarpeta').click(function(){

                var nombreCarpeta = $('#nombreCarpetaEditar').val();
                var carpetaPadre = $('#carpetaPadreEditar').val();
                var id = $('#idCarpeta').val();

                if(nombreCarpeta == "" || nombreCarpeta == null){
                    $('#nombreCarpetaEditar').focus();
                    return false;
                }

                $('#btnUpdateCarpeta').prop("disabled", true);
                $('#btnUpdateCarpeta').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Guardar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_carpeta_update') }}",
                    data: {
                        'id': id,
                        'nombre': nombreCarpeta,
                        'padre': carpetaPadre,
                        'tipo': 3,
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnUpdateCarpeta').prop("disabled", false);
                        $('#btnUpdateCarpeta').html("Guardar");
                    }
                });
            });

            //Botón que modifica la carpeta seleccionada
            $('#btnDeleteCarpeta').click(function(){

                var id = $('#idCarpeta').val();

                $('#btnDeleteCarpeta').prop("disabled", true);
                $('#btnDeleteCarpeta').html("<i class=\"icon-spinner2 spinner mr-2\"></i>Eliminar");

                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_carpeta_delete') }}",
                    data: {
                        'id': id,
                        'tipo': 3
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data == "OK"){
                            location.reload();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                        $('#btnUpdateCarpeta').prop("disabled", false);
                        $('#btnUpdateCarpeta').html("Guardar");
                    }
                });
            });

            //Evento que busca la localidad y provincia
            $('#empresa_codigoPostalPostal').keyup(function(){
                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_busca_localidad_provincia') }}",
                    data: {
                        'codigopostal': $('#empresa_codigoPostalPostal').val(),
                    },
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if(data != ""){
                            $('#empresa_localidadPostal').val(data.localidad);
                            $('#empresa_provinciaPostal').val(data.provincia);
                            $('#empresa_provinciaPostalSerpa').val(data.provincia_id).change();
                            $('#empresa_municipioPostalSerpa').val(data.localidad_id).change();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });
                    }
                });
            });

            //Evento que busca la localidad y provincia
            $('#empresa_codigoPostalFiscal').keyup(function(){
                $.ajax({
                    type: "POST",
                    url: "{{ path('empresa_busca_localidad_provincia') }}",
                    data: {
                        'codigopostal': $('#empresa_codigoPostalFiscal').val(),
                    },
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if(data != ""){
                            $('#empresa_localidadFiscal').val(data.localidad);
                            $('#empresa_provinciaFiscal').val(data.provincia);
                            $('#empresa_provinciaFiscalSerpa').val(data.provincia_id).change();
                            $('#empresa_municipioFiscalSerpa').val(data.localidad_id).change();
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });
                    }
                });
            });

            $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
                localStorage.setItem('activeTabEmpresa', $(e.target).attr('href'));
            });
            var activeTab = localStorage.getItem('activeTabEmpresa');
            if(activeTab){
                $('#tabs a[href="' + activeTab + '"]').tab('show');
            }

            $("#btnExportBalance").click(function(){
                $("#balanceEconomico").table2excel({
                    exclude:".noExl",
                    name:"Balance económico",
                    filename:"Balance económico",
                    fileext:".xls",
                    preserveColors:true
                });
            });
        });

        function deleteTarifa(id, tipo) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_tarifa') }}",
                data: {
                    'tarifaId': id,
                    'tipo': tipo
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que añade el id de la factura para realizar un abono
        $(document).on('click', 'a.selectAbonoFactura', function(){
            var id = $(this).data('id');
            $('#idFacturaAbono').val(id);
        });

        //Boton que elimina la tarifa seleccionada
        $(document).on('click', 'a.eliminarTarifa', function(){
            var id = $(this).data('id');
            var tipo = $(this).data('tipo');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_TARIFA{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteTarifa(id, tipo)
                    }
                }
            });
        });

        function recuperaTarifa(id, tipo) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_tarifa') }}",
                data: {
                    'tarifaId': id,
                    'tipo': tipo
                },
                dataType: "JSON",
                success: function (data) {
                    if (data != null) {
                        if(tipo == 1){
                            $('#idTarifaPrl').val(data.id);
                            $('#listConceptoTarifaPrlEditar').val(data.concepto).change();
                            $('#totalTarifaPrlEditar').val(data.importe);
                            $('#ivaTarifaPrlEditar').val(data.iva);
                        }

                        if(tipo == 2){
                            $('#idTarifaRevisiones').val(data.id);
                            $('#listConceptoTarifaRevisionesEditar').val(data.concepto).change();
                            $('#totalTarifaRevisionesEditar').val(data.importe);
                            $('#ivaTarifaRevisionesEditar').val(data.iva);
                        }
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que añade el id del contrato para su generacion
        $(document).on('click', 'a.selectContrato', function(){
            var contratoId = $(this).data('id');
            $('#contratoId').val(contratoId);
        });

        //Boton que añade el id de la factura para su generacion
        $(document).on('click', 'a.selectFactura', function(){
            var facturaId = $(this).data('id');
            $('#facturaId').val(facturaId);
        });

        function recuperaTecnicos(){
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_tecnicos') }}",
                data: {
                    'empresaId': '{{ app.request.get('id') }}'
                },
                dataType: "JSON",
                beforeSend: function(data){
                    $("#tecnicos").block({
                        message: '<i class="icon-spinner2 spinner"></i>',
                        overlayCSS: {
                            backgroundColor: '#fff',
                            opacity: 0.8,
                            cursor: 'wait'
                        },
                        css: {
                            border: 0,
                            padding: 0,
                            backgroundColor: 'none'
                        }
                    });
                },
                success: function (data) {

                    var table = '<thead><tr class="bg-grey-300"><th>{% trans from 'empresas' %}TRANS_TECNICO{% endtrans %}</th><th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th></tr></thead>';

                    table += "<tbody>";

                    if(JSON.parse(data) != ""){
                        var item = 1;

                        $.each(JSON.parse(data), function (key, item) {

                            if (item % 2 == 0) {
                                 table += '<tr class="grid-row-cells odd"> ';
                             }
                             else {
                                 table += '<tr  class="grid-row-cells even"> ';
                             }

                            if (item["nombre"] != undefined) {
                                table += '<td>' + item["nombre"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["id"] != undefined) {
                                table += '<td><div class="list-icons">';

                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item" onclick="recuperaTecnico('+ item["id"]+');" data-toggle="modal" data-target="#modal_editar_tecnico"><i class="icon-pencil7"></i></a>';
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item eliminarTecnico"><i class="icon-trash"></i></a>';
                                    {% endif %}
                                {% endif %}

                                table += '</div></td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            item++;

                            table += '</tr>';
                        });

                    }else{
                        table += "<tr><td colspan='2' align='center'>{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td></tr>";
                    }

                    table += "</tbody>";

                    $("#tecnicos").html("");
                    $("#tecnicos").html(table);

                },
                error: function(){
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaTecnico(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_tecnico') }}",
                data: {
                    'tecnicoEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data != null) {
                        $('#tecnicoEditar').val(data.tecnico).change();
                        $('#tecnicoEmpresaId').val(data.id);
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function deleteTecnico(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_tecnico') }}",
                data: {
                    'tecnicoEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {

                        recuperaTecnicos();

                        new PNotify({
                            title: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO{% endtrans %}',
                            text: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO_MSG{% endtrans %}',
                            icon: 'icon-checkmark3',
                            type: 'success'
                        });
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaEmails(){
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_emails') }}",
                data: {
                    'empresaId': '{{ app.request.get('id') }}'
                },
                dataType: "JSON",
                beforeSend: function(data){
                    $("#correos").block({
                        message: '<i class="icon-spinner2 spinner"></i>',
                        overlayCSS: {
                            backgroundColor: '#fff',
                            opacity: 0.8,
                            cursor: 'wait'
                        },
                        css: {
                            border: 0,
                            padding: 0,
                            backgroundColor: 'none'
                        }
                    });
                },
                success: function (data) {

                    var table = '<thead><tr class="bg-grey-300"><th>{% trans from 'empresas' %}TRANS_EMAIL{% endtrans %}</th><th>{% trans from 'empresas' %}TRANS_FUNCION_EMAIL{% endtrans %}</th><th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th></tr></thead>';

                    table += "<tbody>";

                    if(JSON.parse(data) != ""){
                        var item = 1;

                        $.each(JSON.parse(data), function (key, item) {

                            if (item % 2 == 0) {
                                 table += '<tr class="grid-row-cells odd"> ';
                             }
                             else {
                                 table += '<tr  class="grid-row-cells even"> ';
                             }

                            if (item["correo"] != undefined) {
                                table += '<td>' + item["correo"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["funcion"] != undefined) {
                                table += '<td>' + item["funcion"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["id"] != undefined) {
                                table += '<td><div class="list-icons">';

                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item" onclick="recuperaEmail('+ item["id"]+');" data-toggle="modal" data-target="#modal_editar_email"><i class="icon-pencil7"></i></a>';
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item eliminarEmail"><i class="icon-trash"></i></a>';
                                    {% endif %}
                                {% endif %}

                               table += '</div></td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            item++;

                            table += '</tr>';
                        });

                    }else{
                        table += "<tr><td colspan='3' align='center'>{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td></tr>";
                    }

                    table += "</tbody>";

                    $("#correos").html("");
                    $("#correos").html(table);

                },
                error: function(){
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaEmail(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_email') }}",
                data: {
                    'correoEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data != null) {
                        $('#emailEditar').val(data.email);
                        $('#funcionEditar').val(data.funcion).change();
                        $('#correoEmpresaIdEditar').val(data.id);
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function deleteEmail(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_email') }}",
                data: {
                    'correoEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {

                        recuperaEmails();

                        new PNotify({
                            title: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO{% endtrans %}',
                            text: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO_MSG{% endtrans %}',
                            icon: 'icon-checkmark3',
                            type: 'success'
                        });
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaCnaes(){
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_cnaes') }}",
                data: {
                    'empresaId': '{{ app.request.get('id') }}'
                },
                dataType: "JSON",
                beforeSend: function(data){
                    $("#cnae").block({
                        message: '<i class="icon-spinner2 spinner"></i>',
                        overlayCSS: {
                            backgroundColor: '#fff',
                            opacity: 0.8,
                            cursor: 'wait'
                        },
                        css: {
                            border: 0,
                            padding: 0,
                            backgroundColor: 'none'
                        }
                    });
                },
                success: function (data) {

                    var table = '<thead><tr class="bg-grey-300"><th>{% trans from 'empresas' %}TRANS_PRINCIPAL_CNAE{% endtrans %}</th><th>{% trans from 'empresas' %}TRANS_CODIGO_CNAE{% endtrans %}</th><th>{% trans from 'empresas' %}TRANS_DESCRIPCION_CNAE{% endtrans %}</th><th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th></tr></thead>';

                    table += "<tbody>";

                    if(JSON.parse(data) != ""){
                        var item = 1;

                        $.each(JSON.parse(data), function (key, item) {

                            if (item % 2 == 0) {
                                 table += '<tr class="grid-row-cells odd"> ';
                             }
                             else {
                                 table += '<tr  class="grid-row-cells even"> ';
                             }

                            if (item["principal"] != undefined) {
                                if(item["principal"] == true){
                                    table += '<td><span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span></td>';
                                }else{
                                    table += '<td><span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span></td>';
                                }
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["cnae"] != undefined) {
                                table += '<td>' + item["cnae"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["descripcion"] != undefined) {
                                table += '<td>' + item["descripcion"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["id"] != undefined) {
                                table += '<td><div class="list-icons">';

                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item" onclick="recuperaCnae('+ item["id"]+');" data-toggle="modal" data-target="#modal_editar_cnae"><i class="icon-pencil7"></i></a>';
                                        table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item eliminarCnae"><i class="icon-trash"></i></a>';
                                    {% endif %}
                                {% endif %}

                                table += '</div></td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            item++;

                            table += '</tr>';
                        });

                    }else{
                        table += "<tr><td colspan='2' align='center'>{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td></tr>";
                    }

                    table += "</tbody>";

                    $("#cnae").html("");
                    $("#cnae").html(table);

                },
                error: function(){
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaCentroTrabajo(){
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_centro_trabajo_empresa') }}",
                data: {
                    'empresaId': '{{ app.request.get('id') }}'
                },
                dataType: "JSON",
                beforeSend: function(data){
                    $("#centroTrabajoEmpresa").block({
                        message: '<i class="icon-spinner2 spinner"></i>',
                        overlayCSS: {
                            backgroundColor: '#fff',
                            opacity: 0.8,
                            cursor: 'wait'
                        },
                        css: {
                            border: 0,
                            padding: 0,
                            backgroundColor: 'none'
                        }
                    });
                },
                success: function (data) {

                    var table = '<thead><tr class="bg-grey-300"><th>{% trans from 'empresas' %}TRANS_NOMBRE{% endtrans %}</th><th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th></tr></thead>';

                    table += "<tbody>";

                    if(JSON.parse(data) != ""){
                        var item = 1;

                        $.each(JSON.parse(data), function (key, item) {

                            if (item % 2 == 0) {
                                 table += '<tr class="grid-row-cells odd"> ';
                             }
                             else {
                                 table += '<tr  class="grid-row-cells even"> ';
                             }

                            if (item["direccion"] != undefined) {
                                table += '<td>' + item["direccion"]+ '</td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            if (item["id"] != undefined) {
                                table += '<td><div class="list-icons">';

                                var id = item['id'];

                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                var url = '{{ path("centro_update", {'id': 'id'}) }}';
                                url = url.replace("id", id);
                                table += '<a href="'+url+'" class="list-icons-item" target="_blank" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>';
                                {% endif %}
                                {% endif %}

                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                table += '<a href="#" data-id="' + item["id"]+ '" target="_self" class="list-icons-item eliminarCentroTrabajo"><i class="icon-trash"></i></a>';
                                {% endif %}
                                {% endif %}

                                table += '</div></td>';
                            }
                            else {
                                table += '<td></td>';
                            }

                            item++;

                            table += '</tr>';
                        });

                    }else{
                        table += "<tr><td colspan='2' align='center'>{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td></tr>";
                    }

                    table += "</tbody>";

                    $("#centroTrabajoEmpresa").html("");
                    $("#centroTrabajoEmpresa").html(table);

                },
                error: function(){
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function recuperaCnae(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_recupera_cnae') }}",
                data: {
                    'cnaeEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data != null) {
                        $('#cnaeValorEditar').val(data.cnaeId).change();
                        $('#cnaeEmpresaIdEditar').val(data.id);

                        if(data.principal == true){
                            $('#uniform-principalEditar span').addClass('checked');
                            $('#principalEditar').attr("checked", "checked");
                        }else{
                            $('#uniform-principalEditar span').removeClass('checked');
                        }

                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function deleteCnae(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_cnae') }}",
                data: {
                    'cnaeEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {

                        recuperaCnaes();

                        new PNotify({
                            title: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO{% endtrans %}',
                            text: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO_MSG{% endtrans %}',
                            icon: 'icon-checkmark3',
                            type: 'success'
                        });
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function deleteTrabajadorEmpresa(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_trabajador_empresa') }}",
                data: {
                    'trabajadorEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function deleteCentroTrabajo(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('empresa_delete_centro_trabajo_empresa') }}",
                data: {
                    'centroEmpresaId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        recuperaCentroTrabajo();

                        new PNotify({
                            title: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO{% endtrans %}',
                            text: '{% trans from "messages" %}TRANS_AVISO_ELIMINADO_MSG{% endtrans %}',
                            icon: 'icon-checkmark3',
                            type: 'success'
                        });
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        $(document).on('click', 'a.eliminarTecnico', function(){
            var id = $(this).data('id');

            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_TECNICO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteTecnico(id)
                    }
                }
            });
        });

        $(document).on('click', 'a.eliminarEmail', function(){
            var id = $(this).data('id');

            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_EMAIL{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteEmail(id)
                    }
                }
            });
        });

        $(document).on('click', 'a.eliminarCnae', function(){
            var id = $(this).data('id');

            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_CNAE{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteCnae(id)
                    }
                }
            });
        });

        $(document).on('click', 'a.eliminarTrabajador', function(){
            var id = $(this).data('id');

            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_TRABAJADOR{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteTrabajadorEmpresa(id)
                    }
                }
            });
        });

        $(document).on('click', 'a.eliminarCentroTrabajo', function(){
            var id = $(this).data('id');

            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_CENTRO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteCentroTrabajo(id)
                    }
                }
            });
        });

        function deleteGiroTransferencia(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('balance_economico_delete_giro_transferencia') }}",
                data: {
                    'giroId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {

                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que elimina el giro seleccionado
        $(document).on('click', 'a.eliminarGiro', function(){
            var id = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_GIRO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteGiroTransferencia(id);
                    }
                }
            });
        });

        //Boton que elimina la transferencia seleccionada
        $(document).on('click', 'a.eliminarTransferencia', function(){
            var id = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_TRANSFERENCIA{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteGiroTransferencia(id);
                    }
                }
            });
        });

        function deleteGiroDevolucion(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('balance_economico_delete_giro_bancario_devolucion') }}",
                data: {
                    'giroBancarioDevolucionId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que elimina la devolucion seleccionado
        $(document).on('click', 'a.eliminarGiroDevolucion', function(){
            var id = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_DEVOLUCION{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteGiroDevolucion(id);
                    }
                }
            });
        });

        function deleteVencimientoFactura(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('factura_delete_vencimiento') }}",
                data: {
                    'vencimientoId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que elimina el vencimiento de la factura seleccionada
        $(document).on('click', 'a.eliminarVencimiento', function(){
            var id = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_VENCIMIENTO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteVencimientoFactura(id);
                    }
                }
            });
        });

        //Boton que elimina la entrada seleccionada
        $(document).on('click', 'a.eliminarEntrada', function(){
            var id = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_DELETE_ENTRADA_BALANCE_ECONOMICO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteEntrada(id);
                    }
                }
            });
        });

        function deleteEntrada(id) {
            $.ajax({
                type: "POST",
                url: "{{ path('balance_economico_delete_entrada') }}",
                data: {
                    'entradaBalanceEconomicoId': id
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        function isValidCif(cif) {
            if (!cif || cif.length !== 9) {
                return false;
            }

            var letters = ['J', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I'];
            var digits = cif.substr(1, cif.length - 2);
            var letter = cif.substr(0, 1);
            var control = cif.substr(cif.length - 1);
            var sum = 0;
            var i;
            var digit;

            if (!letter.match(/[A-Z]/)) {
                return false;
            }

            for (i = 0; i < digits.length; ++i) {
                digit = parseInt(digits[i]);

                if (isNaN(digit)) {
                    return false;
                }

                if (i % 2 === 0) {
                    digit *= 2;
                    if (digit > 9) {
                        digit = parseInt(digit / 10) + (digit % 10);
                    }

                    sum += digit;
                } else {
                    sum += digit;
                }
            }

            sum %= 10;
            if (sum !== 0) {
                digit = 10 - sum;
            } else {
                digit = sum;
            }

            if (letter.match(/[ABEH]/)) {
                return String(digit) === control;
            }
            if (letter.match(/[NPQRSW]/)) {
                return letters[digit] === control;
            }

            return String(digit) === control || letters[digit] === control;
        }

        var arrayContratos = [];
        //Boton que añade la factura a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'contrato\']', function(){
            var contratoId = $(this).attr('id');

            if ($(this).prop('checked')) {
                $('#uniform-'+contratoId+' span').addClass('checked');
                arrayContratos.push(contratoId);
            }else{
                $('#uniform-'+contratoId+' span').removeClass('checked');
                arrayContratos.splice($.inArray(contratoId, arrayContratos),1);
            }
        });

        //Boton que añade todas las facturas a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'contratosAll\']', function(){
            //var cells = $('.datatable-export-excel').DataTable().cells( ).nodes();
            //var checks = $(cells).find('input[name=\'factura\']');
            var checks = $('.datatable-export-excel-contratos').find('input[name=\'contrato\']');

            if($(this).prop('checked')){
                $(checks).each(function() {
                    var contratoId = $(this).attr('id');
                    $('#uniform-'+contratoId+' span').addClass('checked');
                    arrayContratos.push(contratoId);
                });
            }else{
                $(checks).each(function() {
                    var contratoId = $(this).attr('id');
                    $('#uniform-'+contratoId+' span').removeClass('checked');
                });
                arrayContratos.splice(0, arrayContratos.length);
            }
        });

        var arrayFacturas = [];
        //Boton que añade la factura a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'factura\']', function(){
            var facturaId = $(this).attr('id');

            if ($(this).prop('checked')) {
                $('#uniform-'+facturaId+' span').addClass('checked');
                arrayFacturas.push(facturaId);
            }else{
                $('#uniform-'+facturaId+' span').removeClass('checked');
                arrayFacturas.splice($.inArray(facturaId, arrayFacturas),1);
            }
        });

        //Boton que añade todas las facturas a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'facturasAll\']', function(){
            //var cells = $('.datatable-export-excel').DataTable().cells( ).nodes();
            //var checks = $(cells).find('input[name=\'factura\']');
            var checks = $('.datatable-export-excel-facturas').find('input[name=\'factura\']');

            if($(this).prop('checked')){
                $(checks).each(function() {
                    var facturaId = $(this).attr('id');
                    $('#uniform-'+facturaId+' span').addClass('checked');
                    arrayFacturas.push(facturaId);
                });
            }else{
                $(checks).each(function() {
                    var facturaId = $(this).attr('id');
                    $('#uniform-'+facturaId+' span').removeClass('checked');
                });
                arrayFacturas.splice(0, arrayFacturas.length);
            }
        });

        var arrayNotificaciones = [];
        //Boton que añade la factura a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'notificacion\']', function(){
            var notificacionId = $(this).attr('id');

            if ($(this).prop('checked')) {
                $('#uniform-'+notificacionId+' span').addClass('checked');
                arrayNotificaciones.push(notificacionId);
            }else{
                $('#uniform-'+notificacionId+' span').removeClass('checked');
                arrayNotificaciones.splice($.inArray(notificacionId, arrayNotificaciones),1);
            }
        });

        //Boton que añade todas las notificaciones a la lista de notificaciones seleccionadas
        $(document).on('click', 'input[name=\'notificacionAll\']', function(){
            //var cells = $('.datatable-export-excel').DataTable().cells( ).nodes();
            //var checks = $(cells).find('input[name=\'notificacion\']');
            var checks = $('.datatable-export-excel-notificaciones').find('input[name=\'notificacion\']');

            if($(this).prop('checked')){
                $(checks).each(function() {
                    var notificacionId = $(this).attr('id');
                    $('#uniform-'+notificacionId+' span').addClass('checked');
                    arrayNotificaciones.push(notificacionId);
                });
            }else{
                $(checks).each(function() {
                    var notificacionId = $(this).attr('id');
                    $('#uniform-'+notificacionId+' span').removeClass('checked');
                });
                arrayNotificaciones.splice(0, arrayNotificaciones.length);
            }
        });

        var arrayCertificacion = [];
        //Boton que añade la factura a la lista de facturas seleccionadas
        $(document).on('click', 'input[name=\'certificacion\']', function(){
            var certificacionId = $(this).attr('id');

            if ($(this).prop('checked')) {
                $('#uniform-'+certificacionId+' span').addClass('checked');
                arrayCertificacion.push(certificacionId);
            }else{
                $('#uniform-'+certificacionId+' span').removeClass('checked');
                arrayCertificacion.splice($.inArray(certificacionId, arrayCertificacion),1);
            }
        });

        //Boton que añade todas las certificaciones a la lista de certificaciones seleccionadas
        $(document).on('click', 'input[name=\'certificacionAll\']', function(){
            //var cells = $('.datatable-export-excel').DataTable().cells( ).nodes();
            //var checks = $(cells).find('input[name=\'certificacion\']');
            var checks = $('.datatable-export-excel-certificaciones').find('input[name=\'certificacion\']');

            if($(this).prop('checked')){
                $(checks).each(function() {
                    var certificacionId = $(this).attr('id');
                    $('#uniform-'+certificacionId+' span').addClass('checked');
                    arrayCertificacion.push(certificacionId);
                });
            }else{
                $(checks).each(function() {
                    var certificacionId = $(this).attr('id');
                    $('#uniform-'+certificacionId+' span').removeClass('checked');
                });
                arrayCertificacion.splice(0, arrayCertificacion.length);
            }
        });

        var arrayModelo347 = [];
        //Boton que añade el modelo 347 para enviar
        $(document).on('click', 'input[name=\'modelo347\']', function(){
            var modelo347Id = $(this).attr('id');

            if ($(this).prop('checked')) {
                $('#uniform-'+modelo347Id+' span').addClass('checked');
                arrayModelo347.push(modelo347Id);
            }else{
                $('#uniform-'+modelo347Id+' span').removeClass('checked');
                arrayModelo347.splice($.inArray(modelo347Id, arrayModelo347),1);
            }
        });

        //Boton que añade todos los modelo347 seleccionados
        $(document).on('click', 'input[name=\'modelo347All\']', function(){
            //var cells = $('.datatable-export-excel').DataTable().cells( ).nodes();
            //var checks = $(cells).find('input[name=\'certificacion\']');
            var checks = $('.datatable-export-excel-modelo-347').find('input[name=\'modelo347\']');

            if($(this).prop('checked')){
                $(checks).each(function() {
                    var modelo347Id = $(this).attr('id');
                    $('#uniform-'+modelo347Id+' span').addClass('checked');
                    arrayModelo347.push(modelo347Id);
                });
            }else{
                $(checks).each(function() {
                    var modelo347Id = $(this).attr('id');
                    $('#uniform-'+modelo347Id+' span').removeClass('checked');
                });
                arrayModelo347.splice(0, arrayModelo347.length);
            }
        });

        function deleteFichero(id, tipo) {
            $.ajax({
                type: "POST",
                url: "{{ path('gdoc_delete_file') }}",
                data: {
                    'id': id,
                    'tipo': tipo
                },
                dataType: "JSON",
                success: function (data) {
                    if (data == "OK") {
                        location.reload();
                    }
                },
                error: function () {
                    new PNotify({
                        title: 'Ops!',
                        text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                        icon: 'icon-blocked',
                        type: 'error'
                    });
                }
            });
        }

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroContrato', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,1)
                    }
                }
            });
        });

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroFactura', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,2)
                    }
                }
            });
        });

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroNotificacion', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,3)
                    }
                }
            });
        });

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroCertificacion', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,4)
                    }
                }
            });
        });

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroModelo347', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,5)
                    }
                }
            });
        });

        //Boton que elimina el fichero seleccionado
        $(document).on('click', 'a.eliminarFicheroManualVs', function(){
            var fileId = $(this).data('id');
            bootbox.confirm({
                title: '{% trans from 'messages' %}TRANS_ELIMINAR_FICHERO{% endtrans %}',
                message: '{% trans from 'messages' %}TRANS_CONFIRM_DELETE_REGISTRO{% endtrans %}',
                buttons: {
                    confirm: {
                        label: 'Si',
                        className: 'btn-primary'
                    },
                    cancel: {
                        label: 'No',
                        className: 'btn-link'
                    }
                },
                callback: function (result) {
                    if(result == true){
                        deleteFichero(fileId,18)
                    }
                }
            });
        });

    </script>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success bg-white alert-styled-left alert-arrow-left alert-dismissible">
            <button type="button" class="close" data-dismiss="alert"><span>×</span></button>
            {{ message }}
        </div>
    {% endfor %}

    {% for message in app.flashes('danger') %}
        <div class="alert alert-danger bg-white alert-styled-left alert-arrow-left alert-dismissible">
            <button type="button" class="close" data-dismiss="alert"><span>×</span></button>
            {{ message }}
        </div>
    {% endfor %}

    <div class="card">
        <div class="card-body">

            {{ form_start(form) }}

            <ul class="nav nav-tabs nav-tabs-highlight" id="tabs">

                {% if (app.request.get('id') is defined and app.request.get('id') is not empty ) %}
                    <li class="nav-item"><a href="#tab1" class="nav-link active" data-toggle="tab">{% trans %}TRANS_MENU_1{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab2" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_2{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab3" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_3{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab4" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_4{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab5" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_5{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab6" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_6{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab7" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_7{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab8" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_8{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab9" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_9{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab10" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_10{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab11" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_CONTRATOS{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab12" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_RENOVACIONES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab13" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_PAGOS_PENDIENTES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab14" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_FACTURACION{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab15" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_DATOS_BANCARIOS{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab16" class="nav-link" data-toggle="tab">{% trans from 'messages' %}TRANS_MENU_ADM_BALANCE{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab17" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_11{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab18" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_12{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab19" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_13{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab20" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_14{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab21" class="nav-link" data-toggle="tab">{% trans %}TRANS_GESTION_DOCUMENTAL{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab22" class="nav-link" data-toggle="tab">{% trans %}TRANS_MANUAL_VS{% endtrans %}</a></li>
                {% else %}
                    <li class="nav-item"><a href="#tab1" class="nav-link active" data-toggle="tab">{% trans %}TRANS_MENU_1{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_2{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_3{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_4{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_5{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_6{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_7{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_8{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_9{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_10{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_CONTRATOS{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_RENOVACIONES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_PAGOS_PENDIENTES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_FACTURACION{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_DATOS_BANCARIOS{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'messages' %}TRANS_MENU_ADM_BALANCE{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_11{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_12{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_13{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_14{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_GESTION_DOCUMENTAL{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MANUAL_VS{% endtrans %}</a></li>
                {% endif %}

            </ul>

            <div class="tab-content">
                <div class="tab-pane fade active show" id="tab1">
                    <div class="row">
                        <div class="col-lg-12">
                            {% trans %}TRANS_ESTADO{% endtrans %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.anulado) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.pruebasEspeciales) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            {{ form_row(form.codigo) }}
                        </div>
                        <div class="col-lg-6">
                            {{ form_row(form.codigoEmpresa) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            {{ form_row(form.cif) }}
                            <span class="form-text text-danger incorrectoCif" style="display: none;">{% trans %}TRANS_ERROR_CIF{% endtrans %}</span>
                            {{ form_row(form.empresa) }}
                            {{ form_row(form.marcaComercial) }}
                        </div>
                        <div class="col-lg-6">
                            {{ form_row(form.grupoEmpresa) }}
                            {{ form_row(form.tipoEmpresa) }}
                            {{ form_row(form.trabajadores) }}
                        </div>
                    </div>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_USUARIOS_RESPONSABLES{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-12">
                                    {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                        {% if app.session.get('privilegiosRol').editEmpresaSn and app.request.get('id') is defined and app.request.get('id') is not empty %}
                                            <a href="#" class="btn btn-labeled btn-labeled-left bg-grey-300" data-toggle="modal" data-target="#modal_añadir_tecnico">{% trans from 'messages' %}TRANS_AÑADIR_TECNICO{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="tecnicos">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_TECNICO{% endtrans %}</th>
                                            <th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if tecnicos is not empty %}
                                            {% for t in tecnicos %}
                                                <tr>
                                                    {% if t.tecnico is not null %}
                                                        <td>{{ t.tecnico.nombre }}</td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}
                                                    <td>
                                                        <div class="list-icons">
                                                            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                                                    <a href="#" data-id="{{ t.id }}" target="_self" class="list-icons-item" onclick="recuperaTecnico('{{ t.id }}');" data-toggle="modal" data-target="#modal_editar_tecnico"><i class="icon-pencil7"></i></a>
                                                                    <a href="#" data-id="{{ t.id }}" target="_self" class="list-icons-item eliminarTecnico"><i class="icon-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="2" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <br/>

                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.agente) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.vigilanciaSalud) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.gestorAdministrativo) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_SEGURIDAD_SOCIAL{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.regimen) }}
                                {{ form_row(form.ccc) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_OTROS_DATOS_INTERES{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.colaborador) }}
                                {{ form_row(form.mutua) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.spa) }}
                                {{ form_row(form.prescriptor) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.modalidadPreventiva) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <h5>{% trans %}TRAMS_CENTRO_MEDICO_ASIGNADO{% endtrans %}</h5>
                                {{ form_row(form.centroMedico) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <h5>{% trans %}TRANS_CONSENTIMIENTO_CESION_DATOS{% endtrans %}</h5>
                                {{ form_row(form.consentimientoCesionDatos) }}
                            </div>
                        </div>

                    </fieldset>
                </div>

                <div class="tab-pane fade" id="tab2">
                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_DIRECCION_POSTAL{% endtrans %}</legend>
                            <div class="row">
                                <div class="col-lg-3">
                                    {{ form_row(form.domicilioPostal) }}
                                </div>
                                <div class="col-lg-3">
                                    {{ form_row(form.localidadPostal) }}
                                </div>
                                <div class="col-lg-3">
                                    {{ form_row(form.codigoPostalPostal) }}
                                </div>
                                <div class="col-lg-3">
                                    {{ form_row(form.provinciaPostal) }}
                                </div>
                            </div>

                            <h5>{% trans %}TRANS_CODIGO_SERPA{% endtrans %}</h5>

                            <div class="row">
                                <div class="col-lg-6">
                                    {{ form_row(form.provinciaPostalSerpa) }}
                                </div>
                                <div class="col-lg-6">
                                    {{ form_row(form.municipioPostalSerpa) }}
                                </div>
                            </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <button type="button" id="btnCopyDireccion" class="btn btn-labeled btn-labeled-left bg-orange-300">{% trans %}TRANS_COPIAR_DIRECCION{% endtrans %}<b><i class="icon-copy3"></i></b></button>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_DIRECCION_FISCAL{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-3">
                                {{ form_row(form.domicilioFiscal) }}
                                {{ form_row(form.paisFiscal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.localidadFiscal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.codigoPostalFiscal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.provinciaFiscal) }}
                            </div>
                        </div>

                        <h5>{% trans %}TRANS_CODIGO_SERPA{% endtrans %}</h5>

                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.provinciaFiscalSerpa) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.municipioFiscalSerpa) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_TELEFONO_EMAIL{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.telefono1) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.telefono2) }}
                            </div>
{#                            <div class="col-lg-4">#}
{#                                {{ form_row(form.fax) }}#}
{#                            </div>#}
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-lg-12">
                                    {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                        {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                            <a href="#" class="btn btn-labeled btn-labeled-left bg-grey-300" data-toggle="modal" data-target="#modal_añadir_email">{% trans from 'messages' %}TRANS_AÑADIR_EMAIL{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                        {% endif %}
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <br/>

                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="correos">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_EMAIL{% endtrans %}</th>
                                            <th>{% trans %}TRANS_FUNCION_EMAIL{% endtrans %}</th>
                                            <th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if correos is not empty %}
                                            {% for c in correos %}
                                                <tr>
                                                    <td>{{ c.correo }}</td>
                                                    {% if c.funcion is not null %}
                                                        <td>{{ c.funcion.descripcion }}</td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}
                                                    <td>
                                                        <div class="list-icons">
                                                           {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                                                    <a href="#" data-id="{{ c.id }}" target="_self" class="list-icons-item" onclick="recuperaEmail('{{ c.id }}');" data-toggle="modal" data-target="#modal_editar_email"><i class="icon-pencil7"></i></a>
                                                                    <a href="#" data-id="{{ c.id }}" target="_self" class="list-icons-item eliminarEmail"><i class="icon-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="3" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_RESPONSABLE_EMPRESA{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.nombreRepresentante) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.dniRepresentante) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.cargoRepresentante) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_PERSONAS_CONTACTO{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.personaContacto) }}
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="tab-pane fade" id="tab3">
                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_ESTADOS{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.estadoAdministrativoPrevencion) }}
                                {{ form_row(form.estadoAreaAdministracion) }}
                                {{ form_row(form.estadoAreaVigilanciaSalud) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.estadoAdministrativoVigilanciaSalud) }}
                                {{ form_row(form.estadoAreaTecnica) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_FECHAS_ALTA_BAJA{% endtrans %}</legend>
                        <h5>{% trans %}TRANS_PREVENCION{% endtrans %}</h5>
                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.fechaAlta) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.fechaBaja) }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.motivoBaja) }}
                            </div>
                        </div>

                        <h5>{% trans %}TRANS_VIG_SALUD{% endtrans %}</h5>
                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.fechaAltaVigilanciaSalud) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.fechaBajaVigilanciaSalud) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.motivoBajaVigilanciaSalud) }}
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="tab-pane fade" id="tab4">

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_ACTIVIDAD_EMPRESA{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.actividad) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.sectorEmpresarial) }}
                                {{ form_row(form.grupoActividad) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.actividadPreventiva) }}
                                {{ form_row(form.especialidadPreventiva) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.actividadIncluidaAnexo) }}
                                {{ form_row(form.empresaEtt) }}
                                {{ form_row(form.noAplicarIpc) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_NIVEL_RIESGO{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.nivelRiesgoSubjetivoInterno) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_NIVEL_SEGUIMIENTO{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.nivelSeguimientoEmpresa) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_CNAE{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                    {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                        <a href="#" class="btn btn-labeled btn-labeled-left bg-grey-300" data-toggle="modal" data-target="#modal_añadir_cnae">{% trans from 'messages' %}TRANS_AÑADIR_CNAE{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="cnae">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_PRINCIPAL_CNAE{% endtrans %}</th>
                                            <th>{% trans %}TRANS_CODIGO_CNAE{% endtrans %}</th>
                                            <th>{% trans %}TRANS_DESCRIPCION_CNAE{% endtrans %}</th>
                                            <th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if cnae is not empty %}
                                            {% for c in cnae %}
                                                <tr>
                                                    {% if c.principal == true %}
                                                        <td><span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span></td>
                                                    {% else %}
                                                        <td><span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span></td>
                                                    {% endif %}
                                                    {% if c.cnae is not null %}
                                                        <td>{{ c.cnae.cnae }}</td>
                                                        <td>{{ c.cnae.descripcion }}</td>
                                                    {% else %}
                                                        <td></td>
                                                        <td></td>
                                                    {% endif %}
                                                    <td>
                                                        <div class="list-icons">
                                                            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                                                    <a href="#" data-id="{{ c.id }}" target="_self" class="list-icons-item" onclick="recuperaCnae('{{ c.id }}');" data-toggle="modal" data-target="#modal_editar_cnae"><i class="icon-pencil7"></i></a>
                                                                    <a href="#" data-id="{{ c.id }}" target="_self" class="list-icons-item eliminarCnae"><i class="icon-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </div>
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="4" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <br/>

                        <h5>{% trans %}TRANS_COTIZACION_SS{% endtrans %}</h5>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.excluirCalculoRatios) }}
                                {{ form_row(form.excluirMemorialAnual) }}
                            </div>
                        </div>
                    </fieldset>

                </div>

                <div class="tab-pane fade" id="tab5">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesGenerales) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesAreaMedicina) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesAreaTecnica) }}
                        </div>
                    </div>
                </div>
                <!--Peticio 28/07/2023 -->
                <div class="tab-pane fade" id="tab6">
                    <div class="row">
                        <div class="col-lg-3">
                            <!-- Opción 1 -->
                            {{ form_row(form.centroTrabajoDeslocalizado) }}
                        </div>
                        <div class="col-lg-3">
                            <!-- Opción 2 -->
                            {{ form_row(form.centroTrabajoDeslocalizadoConstruccio) }}
                        </div>
                        <div class="col-lg-3">
                            <!-- Opción 3 -->
                            {{ form_row(form.centroTrabajoTiene1) }}
                        </div>
                        <div class="col-lg-3">
                            <!-- Opción 4 -->
                            {{ form_row(form.centroTrabajoTiene2) }}
                        </div>
                    </div>
                    <br/>
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                    <a href="{{ path('centro_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans %}TRANS_AÑADIR_CENTRO{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                    <br/>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-bordered">
                                <table class="table" id="centroTrabajoEmpresa">
                                    <thead>
                                    <tr class="bg-grey-300">
                                        <th>{% trans %}TRANS_DIRECCION{% endtrans %}</th>
                                        <th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if centroTrabajoEmpresa is not empty %}
                                        {% for cte in centroTrabajoEmpresa %}
                                            <tr>
                                                <td>{{ cte.centro.direccion }}</td>
                                                <td>
                                                    <div class="list-icons">
                                                        {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                            {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                                                <a href="{{ path('centro_update', { "id": cte.centro.id }) }}" class="list-icons-item" target="_blank" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>                                                            {% endif %}
                                                        {% endif %}
                                                        {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                            {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                                                <a href="#" data-id="{{ cte.centro.id }}" target="_self" class="list-icons-item eliminarCentroTrabajo"><i class="icon-trash"></i></a>
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    {% else %}
                                        <tr>
                                            <td colspan="2" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab7">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                    <a href="{{ path('trabajador_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans %}TRANS_CREAR_TRABAJADOR{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                               {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-grey-300" data-toggle="modal" data-target="#modal_añadir_trabajador">{% trans %}TRANS_ASIGNAR_TRABAJADOR{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').importTrabajadorSn is defined and app.session.get('privilegiosRol').importTrabajadorSn is not null %}
                                {% if app.session.get('privilegiosRol').importTrabajadorSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" data-toggle="modal" data-target="#modal_import_trabajador">{% trans from 'trabajadores' %}TRANS_IMPORTAR_TRABAJADORES{% endtrans %}<b><i class="icon-import"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <br/>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-trabajadores" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-trabajadores dataTable no-footer" id="trabajadoresEmpresa" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Nombre" aria-sort="ascending">{% trans %}TRANS_NOMBRE{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="DNI">{% trans %}TRANS_DNI_RESPONSABLE_EMPRESA{% endtrans %}
                                            </th>
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab8">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.actuaciones) }}
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab9">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.avisosControl) }}
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab10">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.estructuraDepartamental) }}
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab11">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addContratoSn is defined and app.session.get('privilegiosRol').addContratoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addContratoSn %}
                                    <a href="{{ path('contrato_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans from 'contratos' %}TRANS_NUEVO_CONTRATO{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').sendContratoSn is defined and app.session.get('privilegiosRol').sendContratoSn is not null %}
                                {% if app.session.get('privilegiosRol').sendContratoSn and impagadaSn is defined and impagadaSn == false %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" id="btnEnviaContratos">{% trans from 'contratos' %}TRANS_ENVIAR_CONTRATO{% endtrans %}<b><i class="icon-envelop2"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <br/>
                    <br/>

                    <div class="d-lg-flex">
                        <ul class="nav nav-tabs nav-tabs-vertical flex-column mr-lg-3 wmin-lg-200 mb-lg-0 border-bottom-0">
                            <li class="nav-item"><a href="#activos" class="nav-link active" data-toggle="tab"><i class="icon-check mr-2"></i> {% trans from 'contratos' %}TRANS_ACTIVOS{% endtrans %}</a></li>
                            <li class="nav-item"><a href="#cancelados" class="nav-link" data-toggle="tab"><i class="icon-cross mr-2"></i> {% trans from 'contratos' %}TRANS_CANCELADOS{% endtrans %}</a></li>
                        </ul>

                        <div class="tab-content">
                            <div class="tab-pane fade active show" id="activos">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div id="datatable-contratos" class="dataTables_wrapper no-footer">
                                            <div class="datatable-scroll">
                                                <table class="table datatable-export-excel-contratos dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                                    <thead>
                                                    <tr class="bg-grey-300" role="row">
                                                        <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                            <input type="checkbox" name="contratosAll" id="selectContratosAll"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                                        </th>
                                                        <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                            style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Contrato">{% trans from 'contratos' %}TRANS_CONTRATO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="TipoEmpresa">{% trans %}TRANS_TIPO{% endtrans %}
                                                        </th>
                                                        <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Fecha" aria-sort="descending">{% trans from 'contratos' %}TRANS_FECHA{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Vencimiento">{% trans from 'contratos' %}TRANS_VENCIMIENTO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Importe">{% trans from 'contratos' %}TRANS_IMPORTE{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Facturado">{% trans from 'contratos' %}TRANS_FACTURADO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Enviado">{% trans from 'contratos' %}TRANS_ENVIADO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="FechaEnvio">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="cancelados">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div id="datatable-contratos-cancelados" class="dataTables_wrapper no-footer">
                                            <div class="datatable-scroll">
                                                <table class="table datatable-export-excel-contratos-cancelados dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                                    <thead>
                                                    <tr class="bg-grey-300" role="row">
                                                        <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                            <input type="checkbox" name="contratosAll" id="selectContratosAll"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                                        </th>
                                                        <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                            style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Contrato">{% trans from 'contratos' %}TRANS_CONTRATO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="TipoEmpresa">{% trans %}TRANS_TIPO{% endtrans %}
                                                        </th>
                                                        <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Fecha" aria-sort="descending">{% trans from 'contratos' %}TRANS_FECHA{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Vencimiento">{% trans from 'contratos' %}TRANS_VENCIMIENTO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Importe">{% trans from 'contratos' %}TRANS_IMPORTE{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Facturado">{% trans from 'contratos' %}TRANS_FACTURADO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="Enviado">{% trans from 'contratos' %}TRANS_ENVIADO{% endtrans %}
                                                        </th>
                                                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                            aria-label="FechaEnvio">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab12">

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addRenovacionSn is defined and app.session.get('privilegiosRol').addRenovacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addRenovacionSn %}
                                    <!-- /Modal añadir trabajador <a href="{{ path('renovacion_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans from 'renovaciones' %}TRANS_NUEVA_RENOVACION{% endtrans %}<b><i class="icon-plus3"></i></b></a> -->
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-renovaciones" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-renovaciones dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Fecha" aria-sort="descending">{% trans from 'renovaciones' %}TRANS_FECHA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Vencimiento">{% trans from 'renovaciones' %}TRANS_VENCIMIENTO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Contrato">{% trans from 'renovaciones' %}TRANS_CONTRATO{% endtrans %}
                                            </th>
                                            {#                        <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"#}
                                            {#                            aria-label="Tipo">{% trans %}TRANS_TIPO{% endtrans %}#}
                                            {#                        </th>#}
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Renovado">{% trans from 'renovaciones' %}TRANS_RENOVADO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="RenovadoCon">{% trans from 'renovaciones' %}TRANS_RENOVADO_CON{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab13">

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addPagoPendienteSn is defined and app.session.get('privilegiosRol').addPagoPendienteSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addPagoPendienteSn %}
                                    <a href="{{ path('pago_pendiente_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans from 'pagopendiente' %}TRANS_NUEVO_PAGO{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-pagos" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-pagos dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Contrato" >{% trans from 'contratos' %}TRANS_CONTRATO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Estado">{% trans from 'pagopendiente' %}TRANS_ESTADO{% endtrans %}
                                            </th>
                                            <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Vencimiento" aria-sort="descending">{% trans from 'pagopendiente' %}TRANS_VENCIMIENTO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Iva">{% trans from 'pagopendiente' %}TRANS_IVA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Total">{% trans from 'pagopendiente' %}TRANS_TOTAL{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab14">

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addFacturacionSn is defined and app.session.get('privilegiosRol').addFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addFacturacionSn %}
                                    <a href="{{ path('factura_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans from 'facturacion' %}TRANS_NUEVA_FACTURA{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').sendFacturacionSn is defined and app.session.get('privilegiosRol').sendFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').sendFacturacionSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" id="btnEnviaFactura">{% trans from 'facturacion' %}TRANS_ENVIAR_FACTURA{% endtrans %}<b><i class="icon-envelop2"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-facturas" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-facturas dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                <input type="checkbox" name="facturasAll" id="selectFacturasAll"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                            </th>
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Tipo">{% trans from 'facturacion' %}TRANS_TIPO{% endtrans %}
                                            </th>
                                            <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Fecha" aria-sort="descending">{% trans from 'facturacion' %}TRANS_FECHA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Factura">{% trans from 'facturacion' %}TRANS_FACTURA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FacturaRectificativa">{% trans from 'facturacion' %}TRANS_FACTURA_RECTIFICATIVA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FormaPago">{% trans from 'facturacion' %}TRANS_FORMA_PAGO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Importe">{% trans from 'facturacion' %}TRANS_IMPORTE{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Enviada">{% trans from 'facturacion' %}TRANS_ENVIADA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FechaEnvio">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab15">

                    <div class="row">
                        <div class="col-lg-4">
                            {{ form_row(form.formaPago) }}
                        </div>
                        <div class="col-lg-2">
                            {{ form_row(form.diaPago) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addDatosBancariosSn is defined and app.session.get('privilegiosRol').addDatosBancariosSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addDatosBancariosSn %}
                                    <a href="{{ path('datos_bancarios_create') }}" class="btn btn-labeled btn-labeled-left bg-primary">{% trans from 'datosbancarios' %}TRANS_NUEVO_DATO_BANCARIO{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-datos-bancarios" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-datos-bancarios dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Banco" aria-sort="ascending">{% trans from 'datosbancarios' %}TRANS_BANCO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Principal">{% trans from 'datosbancarios' %}TRANS_PRINCIPAL{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab16">
                    <div class="row">
                        <div class="col-lg-4">
                            {% if app.session.get('privilegiosRol').addEntradaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').addEntradaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addEntradaBalanceEconomicoSn %}
                                    <a href="{{ path('balance_economico_add_entrada') }}" class="btn btn-labeled btn-labeled-left bg-grey-300">{% trans from 'balanceeconomico' %}TRANS_NUEVA_ENTRADA_BALANCE{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="col-lg-4">
                            {% if app.session.get('privilegiosRol').addTransferenciaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').addTransferenciaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addTransferenciaBalanceEconomicoSn %}
                                    {% if app.session.get('empresa') is defined and app.session.get('empresa') is not null %}
                                        <a href="{{ path('balance_economico_add_transferencia') }}" class="btn btn-labeled btn-labeled-left bg-slate-300">{% trans from 'balanceeconomico' %}TRANS_AÑADIR_TRANSFERENCIA_BANCARIA{% endtrans %}<b><i class="icon-file-empty"></i></b></a>
                                    {% else %}
                                        <a href="#" class="btn btn-labeled btn-labeled-left bg-grey-300 noEmpresa">{% trans from 'balanceeconomico' %}TRANS_AÑADIR_TRANSFERENCIA_BANCARIA{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="col-lg-4">
                            <button type="button" class="btn btn-success" id="btnExportBalance"><i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel</button>
                        </div>
                    </div>

                    <br/>

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-bordered">
                                <table class="table" id="balanceEconomico">
                                    <thead>
                                    <tr class="bg-grey-300">
                                        <th>{% trans from 'balanceeconomico' %}TRANS_ESTADO_GIRO{% endtrans %}</th>
                                        <th>{% trans from 'balanceeconomico' %}TRANS_FECHA{% endtrans %}</th>
                                        <th>{% trans from 'balanceeconomico' %}TRANS_CONCEPTO{% endtrans %}</th>
                                        <th>{% trans from 'balanceeconomico' %}TRANS_DEBE{% endtrans %}</th>
                                        <th>{% trans from 'balanceeconomico' %}TRANS_HABER{% endtrans %}</th>
                                        <th>{% trans from 'balanceeconomico' %}TRANS_COBRO_CONFIRMADO{% endtrans %}</th>
                                        <th>{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% set total = 0 %}
                                    {% if balanceEconomico is not empty %}
                                        {% set debe = 0 %}
                                        {% set haber = 0 %}
                                        {% for be in balanceEconomico %}
                                            {% set abonoSn = false %}
                                            <tr>
                                                <td></td>
                                                <td>{{ be.fecha }}</td>
                                                <td>{{ be.concepto }}</td>
                                                {% if be.debe is not null %}
                                                    <td>{{ be.debe|number_format(2, ',', '.') }} €</td>
                                                {% else %}
                                                    <td></td>
                                                {% endif %}
                                                {% if be.haber is not null %}
                                                    <td>{{ be.haber|number_format(2, ',', '.') }} €</td>
                                                {% else %}
                                                    <td></td>
                                                {% endif %}
                                                <td></td>
                                                <td>
                                                    {% if be.id is defined and be.id is not empty %}
                                                        {% if app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                            {% if app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn %}
                                                                <a href="{{ path('balance_economico_update_entrada', { 'id': be.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                            {% if app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn %}
                                                                <a href="#" data-id="{{ be.id }}" class="list-icons-item eliminarEntrada" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                            {% endif %}
                                                        {% endif %}
                                                    {% endif %}
                                                </td>
                                            </tr>
                                            {% if be.pagos is defined and be.pagos is not empty %}
                                                {% for p in be.pagos %}
                                                    <tr>
                                                        {% if p.remesado is not empty %}
                                                            <td>
                                                                <span class="badge badge-success">{% trans from 'balanceeconomico' %}TRANS_GIRO_REMESADO{% endtrans %}</span>
                                                                |
                                                                {% if p.girado == true %}
                                                                    <span class="badge badge-success">{% trans from 'balanceeconomico' %}TRANS_GIRADO{% endtrans %}</span>
                                                                {% else %}
                                                                    <span class="badge badge-danger">{% trans from 'balanceeconomico' %}TRANS_PENDIENTE_GIRAR{% endtrans %}</span>
                                                                {% endif %}
                                                            </td>
                                                            {% set haber = haber + p.haber|abs %}
                                                        {% else %}
                                                            {% if p.es_factura == false %}
                                                                <td>
                                                                    <span class="badge badge-danger">{% trans from 'balanceeconomico' %}TRANS_GIRO_NO_REMESADO{% endtrans %}</span>
                                                                    |
                                                                    {% if p.girado == true %}
                                                                        <span class="badge badge-success">{% trans from 'balanceeconomico' %}TRANS_GIRADO{% endtrans %}</span>
                                                                        {% set haber = haber + p.haber|abs %}
                                                                    {% else %}
                                                                        <span class="badge badge-danger">{% trans from 'balanceeconomico' %}TRANS_PENDIENTE_GIRAR{% endtrans %}</span>
                                                                    {% endif %}
                                                                </td>
                                                            {% else %}
                                                                <td></td>
                                                            {% endif %}
                                                        {% endif %}
                                                        <td>{{ p.fecha }}</td>
                                                        <td>{{ p.concepto }}</td>
                                                        <td></td>
                                                        {% if p.haber is not null %}
                                                            <td>{{ p.haber|number_format(2, ',', '.') }} €</td>
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        <td></td>
                                                        <td>
                                                            {% if p.es_factura == false %}
                                                                {% if app.session.get('privilegiosRol').editGiroBalanceEconomicoSn is defined and app.session.get('privilegiosRol').editGiroBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                    {% if app.session.get('privilegiosRol').editGiroBalanceEconomicoSn %}
                                                                        <a href="{{ path('balance_economico_edit_giro', { 'id': p.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                    {% endif %}
                                                                {% endif %}

                                                                {% if app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn is defined and app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                    {% if app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn %}
                                                                        <a href="#" data-id="{{ p.id }}" class="list-icons-item eliminarGiro" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                                    {% endif %}
                                                                {% endif %}
                                                            {% endif %}

                                                            {% if p.es_factura == true %}
                                                                {% if app.session.get('privilegiosRol').deleteTransferenciaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').deleteTransferenciaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                    {% if app.session.get('privilegiosRol').deleteTransferenciaBalanceEconomicoSn %}
                                                                        <a href="#" data-id="{{ p.id }}" class="list-icons-item eliminarTransferencia" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                                    {% endif %}
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                    {% if p.devolucion is defined and p.devolucion is not empty %}
                                                        {% for pd in p.devolucion %}
                                                            <tr>
                                                                <td></td>
                                                                <td>{{ pd.fecha }}</td>
                                                                <td>{{ pd.concepto }}</td>
                                                                {% if pd.debe is not null %}
                                                                    <td>{{ pd.debe|number_format(2, ',', '.') }} €</td>
                                                                {% else %}
                                                                    <td></td>
                                                                {% endif %}
                                                                <td></td>
                                                                <td></td>
                                                                <td>
                                                                    {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is defined and app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                        {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn %}
                                                                            <a href="{{ path('balance_economico_update_giro_bancario_devolucion', { 'id': pd.id }) }}" target="_blank" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                    {% if pd.recibo_generado == false %}
                                                                        {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is defined and app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                            {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn %}
                                                                                <a href="{{ path('factura_generar_recibo_devolucion', { 'id': pd.id }) }}" class="list-icons-item" data-popup="tooltip" title="Generar recibo" data-container="body"><i class="icon-file-check"></i></a>
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endif %}
                                                                    {% if app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn is defined and app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                        {% if app.session.get('privilegiosRol').deleteGiroBalanceEconomicoSn %}
                                                                            <a href="#" data-id="{{ pd.id }}" class="list-icons-item eliminarGiroDevolucion" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                                        {% endif %}
                                                                    {% endif %}
                                                                </td>
                                                                {% set debe = debe + pd.debe %}
                                                            </tr>
                                                        {% endfor %}
                                                    {% endif %}
                                                {% endfor %}
                                            {% endif %}
                                            {% if be.abonos is defined and be.abonos is not empty %}
                                                {% for a in be.abonos %}
                                                    <tr>
                                                        <td></td>
                                                        <td>{{ a.fecha }}</td>
                                                        <td>{{ a.concepto }}</td>
                                                        {% if a.debe is not null %}
                                                            <td style="color: red;">{{ a.debe|number_format(2, ',', '.') }} €</td>
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        <td></td>
                                                        <td></td>
                                                        <td>
                                                            {% if app.session.get('privilegiosRol').editFacturacionSn is defined and app.session.get('privilegiosRol').editFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editFacturacionSn %}
                                                                    <a href="{{ path('factura_update', { 'id': a.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                    {% set debe = debe + a.debe %}
                                                {% endfor %}
                                            {% endif %}
                                            {% if be.vencimiento is defined and be.vencimiento is not empty %}
                                                {% for v in be.vencimiento %}
                                                    <tr>
                                                        <td></td>
                                                        <td>{{ v.fecha }}</td>
                                                        <td>{{ v.concepto }}</td>
                                                        <td></td>
                                                        {% if v.haber is not null %}
                                                            <td>{{ v.haber|number_format(2, ',', '.') }} €</td>
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        <td>
                                                            {% if v.confirmado == true %}
                                                                <span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>
                                                            {% else %}
                                                                <span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            {% if v.confirmado == false %}
                                                                {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is defined and app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                    {% if app.session.get('privilegiosRol').confirmarVencimientoFacturacionSn %}
                                                                        <a href="{{ path('factura_confirmar_vencimiento', { 'id': v.id }) }}" class="list-icons-item" data-popup="tooltip" title="Confirmar cobro vencimiento" data-container="body"><i class="icon-file-check"></i></a>
                                                                    {% endif %}
                                                                {% endif %}
{#                                                                {% set haber = haber - v.haber %}#}
                                                            {% else %}
                                                                {% set haber = haber + v.haber|abs %}
                                                            {% endif %}

                                                            {% if app.session.get('privilegiosRol').editFacturacionSn is defined and app.session.get('privilegiosRol').editFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editFacturacionSn%} 
                                                                    <a href="{{ path('balance_economico_update_facturacion_vencimiento', { 'id': v.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                {% endif %}
                                                            {% endif %}

                                                            {% if app.session.get('privilegiosRol').deleteVencimientoFacturacionSn is defined and app.session.get('privilegiosRol').deleteVencimientoFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').deleteVencimientoFacturacionSn %}
                                                                    <a href="#" data-id="{{ v.id }}" class="list-icons-item eliminarVencimiento" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endif %}
                                            {% if be.entradas is defined and be.entradas is not empty %}
                                                {% for a in be.entradas %}
                                                    <tr>
                                                        <td></td>
                                                        <td>{{ a.fecha }}</td>
                                                        <td>{{ a.concepto }}</td>
                                                        {% if a.debe is defined and a.debe is not null %}
                                                            <td>{{ a.debe|number_format(2, ',', '.') }} €</td>
                                                            {% set debe = debe + a.debe %}
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        {% if a.haber is defined and a.haber is not null %}
                                                            <td>{{ a.haber|number_format(2, ',', '.') }} €</td>
                                                            {% if a.confirmado == true %}
                                                                {% set haber = haber + a.haber %}
                                                            {% endif %}
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        <td>
                                                            {% if a.confirmado == true %}
                                                                <span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span>
                                                            {% else %}
                                                                <span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span>
                                                            {% endif %}
                                                        </td>
                                                        <td>
                                                            {% if app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editEntradaBalanceEconomicoSn %}
                                                                    <a href="{{ path('balance_economico_update_entrada', { 'id': a.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                            {% if app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn is defined and app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').deleteEntradaBalanceEconomicoSn %}
                                                                    <a href="#" data-id="{{ a.id }}" class="list-icons-item eliminarEntrada" data-popup="tooltip" title="Eliminar" data-container="body"><i class="icon-trash"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            {% endif %}
                                            {% if be.rectificativa is defined and be.rectificativa is not empty %}
                                                {% for r in be.rectificativa %}
                                                    <tr>
                                                        <td></td>
                                                        <td>{{ r.fecha }}</td>
                                                        <td>{{ r.concepto }}</td>
                                                        {% if r.debe is not null %}
                                                            <td style="color: red;">{{ r.debe|number_format(2, ',', '.') }} €</td>
                                                        {% else %}
                                                            <td></td>
                                                        {% endif %}
                                                        <td></td>
                                                        <td></td>
                                                        <td>
                                                            {% if app.session.get('privilegiosRol').editFacturacionSn is defined and app.session.get('privilegiosRol').editFacturacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                                                {% if app.session.get('privilegiosRol').editFacturacionSn %}
                                                                    <a href="{{ path('factura_update', { 'id': r.id }) }}" class="list-icons-item" data-popup="tooltip" title="Editar" data-container="body"><i class="icon-pencil7"></i></a>
                                                                {% endif %}
                                                            {% endif %}
                                                        </td>
                                                    </tr>
                                                    {% set debe = debe + r.debe %}
                                                {% endfor %}
                                            {% endif %}
                                            {% set debe = debe + be.debe|abs %}
                                            {% set haber = haber + be.haber|abs %}
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        {% endfor %}
                                        {% set total = haber|abs - debe %}
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td>Balance</td>
                                            <td style="color: red; font-weight: bolder;">{{ debe|number_format(2, ',', '.') }} €</td>
                                            <td style="color: blue; font-weight: bolder;">{{ haber|number_format(2, ',', '.') }} €</td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td style="color: red; font-weight: bolder;"></td>
                                            <td style="color: blue; font-weight: bolder;"></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    {% else %}
                                        <tr>
                                            <td colspan="7" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {% if total < 0 %}
                                <h3>Saldo: <strong style="color: red;">{{ total|number_format(2, ',', '.') }} €</strong></h3>
                            {% else %}
                                <h3>Saldo: <strong style="color: green;">{{ total|number_format(2, ',', '.') }} €</strong></h3>
                            {% endif %}
                        </div>
                    </div>

                </div>

                <div class="tab-pane fade" id="tab17">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addNotificacionSn is defined and app.session.get('privilegiosRol').addNotificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addNotificacionSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_generate_notificacion">{% trans %}TRANS_AÑADIR_NOTIFICACION{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').sendNotificacionSn is defined and app.session.get('privilegiosRol').sendNotificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').sendNotificacionSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" id="btnEnviaNotificacion">{% trans %}TRANS_ENVIAR_NOTIFICACION{% endtrans %}<b><i class="icon-envelop2"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-notificaciones" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-notificaciones dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                <input type="checkbox" name="notificacionAll" id="selectNotificacionAll"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                            </th>
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Nombre" aria-sort="ascending">{% trans %}TRANS_NOMBRE{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Enviada">{% trans from 'facturacion' %}TRANS_ENVIADA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FechaEnvio">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab18">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addCertificacionSn is defined and app.session.get('privilegiosRol').addCertificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addCertificacionSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_generate_certificacion">{% trans %}TRANS_AÑADIR_CERTIFICACION{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').printCertificacionSn is defined and app.session.get('privilegiosRol').printCertificacionSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').printCertificacionSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" id="btnEnviaCertificacion">{% trans %}TRANS_ENVIAR_CERTIFICACION{% endtrans %}<b><i class="icon-envelop2"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-certificaciones" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-certificaciones dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                <input type="checkbox" name="certificacionAll" id="selectCertificacionAll"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                            </th>
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Nombre" aria-sort="ascending">{% trans %}TRANS_NOMBRE{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Enviada">{% trans from 'facturacion' %}TRANS_ENVIADA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FechaEnviada">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab19">

                    <div class="row">
                        <div class="col-lg-4">
                            {{ form_row(form.formaPagoRml) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <h3 class="text-center">{% trans %}TRANS_PRL{% endtrans %}</h3>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addTarifaSn is defined and app.session.get('privilegiosRol').addTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addTarifaSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_añadir_tarifa_prl">{% trans %}TRANS_AÑADIR_TARIFA{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-tarifas-prl" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-tarifas-prl dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Concepto" aria-sort="ascending">{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Iva" >{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Importe" >{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <h3 class="text-center">{% trans %}TRANS_REVISIONES_MEDICAS{% endtrans %}</h3>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addTarifaSn is defined and app.session.get('privilegiosRol').addTarifaSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addTarifaSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_añadir_tarifa_revisiones">{% trans %}TRANS_AÑADIR_TARIFA{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-tarifas-revisiones" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-tarifas-revisiones dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Concepto" aria-sort="ascending">{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Iva" >{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Importe" >{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab20">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addModelo347Sn is defined and app.session.get('privilegiosRol').addModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addModelo347Sn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_generate_modelo_347">{% trans %}TRANS_AÑADIR_MODELO_347{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                            {% if app.session.get('privilegiosRol').sendModelo347Sn is defined and app.session.get('privilegiosRol').sendModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').sendModelo347Sn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-slate" style="margin-left: 5px;" id="btnEnviaModelo347">{% trans %}TRANS_ENVIAR_MODELO347{% endtrans %}<b><i class="icon-envelop2"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-modelo-347" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-modelo-347 dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Select">
                                                <input type="checkbox" name="modelo347All" id="selectModelo347All"  class="form-check-input-styled form-check-input" value="1" /> {% trans from 'messages' %}TRANS_SELECT_ALL{% endtrans %}
                                            </th>
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Fecha" aria-sort="descending">{% trans %}TRANS_FECHA_MODELO_347{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Enviada">{% trans from 'facturacion' %}TRANS_ENVIADA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="FechaEnviada">{% trans %}TRANS_FECHA_ENVIO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab21">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addGdocSn is defined and app.session.get('privilegiosRol').addGdocSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addGdocSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" style="margin-right: 10px;" data-toggle="modal" data-target="#modal_añadir_carpeta">{% trans from 'gdoc' %}TRANS_ADD_CARPETA{% endtrans %}<b><i class="icon-folder-plus"></i></b></a>
                                {% endif %}
                            {% endif %}

                            {% if app.session.get('privilegiosRol').addGdocFileSn is defined and app.session.get('privilegiosRol').addGdocFileSn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addGdocFileSn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-success" data-toggle="modal" data-target="#modal_añadir_fichero">{% trans from 'gdoc' %}TRANS_AÑADIR_FICHERO{% endtrans %}<b><i class="icon-file-upload"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <br/>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="tree" style="border: 1px solid #DDD; border-radius: 5px; padding:20px; margin:0 auto;"></div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab22">
                    <div class="row">
                        <div class="col-lg-12">
                            {% if app.session.get('privilegiosRol').addModelo347Sn is defined and app.session.get('privilegiosRol').addModelo347Sn is not null and impagadaSn is defined and impagadaSn == false %}
                                {% if app.session.get('privilegiosRol').addModelo347Sn %}
                                    <a href="#" class="btn btn-labeled btn-labeled-left bg-primary" data-toggle="modal" data-target="#modal_generate_manualvs">{% trans %}TRANS_AÑADIR_MANUAL_VS{% endtrans %}<b><i class="icon-plus3"></i></b></a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-manualvs" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-manualvs dataTable no-footer" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="text-center sorting_disabled" rowspan="1" colspan="1" aria-label="Actions"
                                                style="width: 100px;">{% trans from 'messages' %}TRANS_ACCIONES{% endtrans %}
                                            </th>
                                            <th class="sorting_desc" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Fecha" aria-sort="descending">{% trans %}TRANS_FECHA_MODELO_347{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <div class="card-footer d-flex justify-content-between align-items-center border-top-0">
            {% if app.session.get('privilegiosRol').editEmpresaSn is defined and app.session.get('privilegiosRol').editEmpresaSn is not null %}
                {% if app.session.get('privilegiosRol').editEmpresaSn %}
                    {{ form_row(form.guardar) }}
                {% else %}
                    {{ form_row(form.guardar, {'attr': {'style': 'display: none;'}}) }}
                {% endif %}
            {% else %}
                {{ form_row(form.guardar, {'attr': {'style': 'display: none;'}}) }}
            {% endif %}
        </div>

        {{ form_end(form) }}
    </div>

    <!-- Modal añadir tecnico -->
    <div id="modal_añadir_tecnico" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_AÑADIR_TECNICO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_TECNICO{% endtrans %}</label>
                    <select id="tecnico" class="select-search form-control">
                        <option value=""></option>
                        {% if listTecnicos is not empty %}
                            {% for lt in listTecnicos %}
                                <option value="{{ lt.id }}">{{ lt.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddTecnico">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir tecnico -->

    <!-- Modal editar tecnico -->
    <div id="modal_editar_tecnico" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_EDITAR_TECNICO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_TECNICO{% endtrans %}</label>
                    <select id="tecnicoEditar" class="select-search form-control">
                        <option value=""></option>
                        {% if listTecnicos is not empty %}
                            {% for lt in listTecnicos %}
                                <option value="{{ lt.id }}">{{ lt.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>
                    <input type="hidden" id="tecnicoEmpresaId" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnUpdateTecnico">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal editar tecnico -->

    <!-- Modal añadir correo -->
    <div id="modal_añadir_email" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_AÑADIR_CORREO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_EMAIL{% endtrans %}</label>
                    <input type="text" id="email" class="form-control" />

                    <label>{% trans %}TRANS_FUNCION_EMAIL{% endtrans %}</label>
                    <select id="funcion" class="select-search form-control">
                        <option value=""></option>
                        {% if listFuncionCorreo is not empty %}
                            {% for lf in listFuncionCorreo %}
                                <option value="{{ lf.id }}">{{ lf.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddCorreo">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir correo -->

    <!-- Modal editar correo -->
    <div id="modal_editar_email" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_EDITAR_CORREO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_EMAIL{% endtrans %}</label>
                    <input type="text" id="emailEditar" class="form-control" />

                    <label>{% trans %}TRANS_FUNCION_EMAIL{% endtrans %}</label>
                    <select id="funcionEditar" class="select-search form-control">
                        <option value=""></option>
                        {% if listFuncionCorreo is not empty %}
                            {% for lf in listFuncionCorreo %}
                                <option value="{{ lf.id }}">{{ lf.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <input type="hidden" id="correoEmpresaIdEditar" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnUpdateCorreo">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal editar correo -->

    <!-- Modal añadir cnae -->
    <div id="modal_añadir_cnae" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_AÑADIR_CNAE{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_CNAE{% endtrans %}</label>
                    <select id="cnaeValor" class="select-search form-control">
                        <option value=""></option>
                        {% if listCnae is not empty %}
                            {% for lc in listCnae %}
                                <option value="{{ lc.id }}">{{ lc.cnae }} - {{ lc.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <br/>
                    <br/>

                    <div class="form-check">
                        <input type="checkbox" id="principal" name="principal" class="form-check-input-styled form-check-input" value="1" checked="checked" />
                        <label class="form-check-label" for="principal">Principal</label>
                    </div>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddCnae">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir cnae -->

    <!-- Modal editar cnae -->
    <div id="modal_editar_cnae" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_EDITAR_CNAE{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <label>{% trans %}TRANS_CNAE{% endtrans %}</label>
                    <select id="cnaeValorEditar" class="select-search form-control" required>
                        <option value=""></option>
                        {% if listCnae is not empty %}
                            {% for lc in listCnae %}
                                <option value="{{ lc.id }}">{{ lc.cnae }} - {{ lc.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <br/>
                    <br/>

                    <div class="form-check">
                        <input type="checkbox" id="principalEditar" name="principalEditar" class="form-check-input-styled form-check-input" value="1" checked="checked" />
                        <label class="form-check-label" for="principal">Principal</label>
                    </div>

                    <input type="hidden" id="cnaeEmpresaIdEditar" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnUpdateCnae">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal editar cnae -->

    <!-- Modal generacion contrato -->
    <div id="modal_generate_contrato" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'contratos' %}TRANS_IMPRIMIR_CONTRATO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaContrato" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasContratos is not empty %}
                            {% for lpc in listPlantillasContratos %}
                                <option value="{{ lpc.id }}">{{ lpc.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <input type="hidden" id="contratoId" class="form-control"/>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraContrato">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion contrato -->

    <!-- Modal generacion factura -->
    <div id="modal_generate_factura" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'facturacion' %}IMPRIMIR_FACTURA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaFactura" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasFacturas is not empty %}
                            {% for lp in listPlantillasFacturas %}
                                <option value="{{ lp.id }}">{{ lp.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <input type="hidden" id="facturaId" class="form-control"/>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraFactura">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion factura -->

    <!-- Modal generacion notificacion -->
    <div id="modal_generate_notificacion" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_IMPRIMIR_NOTIFICACION{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaNotificacion" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasNotificaciones is not empty %}
                            {% for lpn in listPlantillasNotificaciones %}
                                <option value="{{ lpn.id }}">{{ lpn.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraNotificacion">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion notificacion -->

    <!-- Modal generacion certificacion -->
    <div id="modal_generate_certificacion" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_IMPRIMIR_CERTIFICACION{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaCertificacion" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasCertificaciones is not empty %}
                            {% for lpc in listPlantillasCertificaciones %}
                                <option value="{{ lpc.id }}">{{ lpc.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraCertificacion">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion certificacion -->

    <!-- Modal añadir tarifa prl -->
    <div id="modal_añadir_tarifa_prl" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_AÑADIR_TARIFA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}</label>
                    <select id="listConceptoTarifaPrl" class="select-search form-control">
                        <option value=""></option>
                        {% if listConceptoTarifas is not empty %}
                            {% for lct in listConceptoTarifas %}
                                <option value="{{ lct.id }}">{{ lct.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <label>{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}</label>
                    <input type="text" id="ivaTarifaPrl" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <label>{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}</label>
                    <input type="text" id="totalTarifaPrl" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddTarifaPrl">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir tarifa prl -->

    <!-- Modal editar tarifa prl -->
    <div id="modal_editar_tarifa_prl" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_EDITAR_TARIFA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}</label>
                    <select id="listConceptoTarifaPrlEditar" class="select-search form-control">
                        <option value=""></option>
                        {% if listConceptoTarifas is not empty %}
                            {% for lct in listConceptoTarifas %}
                                <option value="{{ lct.id }}">{{ lct.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <label>{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}</label>
                    <input type="text" id="ivaTarifaPrlEditar" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <label>{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}</label>
                    <input type="text" id="totalTarifaPrlEditar" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <input type="hidden" id="idTarifaPrl" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnEditTarifaPrl">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal editar tarifa prl -->

    <!-- Modal añadir tarifa revisiones -->
    <div id="modal_añadir_tarifa_revisiones" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_AÑADIR_TARIFA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}</label>
                    <select id="listConceptoTarifaRevisiones" class="select-search form-control">
                        <option value=""></option>
                        {% if listConceptoTarifas is not empty %}
                            {% for lct in listConceptoTarifas %}
                                <option value="{{ lct.id }}">{{ lct.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <label>{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}</label>
                    <input type="text" id="ivaTarifaRevisiones" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <label>{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}</label>
                    <input type="text" id="totalTarifaRevisiones" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddTarifaRevisiones">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir tarifa revisiones -->

    <!-- Modal editar tarifa revisiones -->
    <div id="modal_editar_tarifa_revisiones" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_EDITAR_TARIFA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'facturacion' %}TRANS_CONCEPTO{% endtrans %}</label>
                    <select id="listConceptoTarifaRevisionesEditar" class="select-search form-control">
                        <option value=""></option>
                        {% if listConceptoTarifas is not empty %}
                            {% for lct in listConceptoTarifas %}
                                <option value="{{ lct.id }}">{{ lct.descripcion }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <label>{% trans from 'facturacion' %}TRANS_IVA{% endtrans %}</label>
                    <input type="text" id="ivaTarifaRevisionesEditar" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <label>{% trans from 'facturacion' %}TRANS_IMPORTE_TOTAL{% endtrans %}</label>
                    <input type="text" id="totalTarifaRevisionesEditar" min="0" max="999999999.9999" step="0.001" class="type_text_to_number form-control"  />

                    <input type="hidden" id="idTarifaRevisiones" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnEditTarifaRevisiones">Guardar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal editar tarifa revisiones -->

    <!-- Modal realizar abono factura -->
    <div id="modal_realizar_abono_factura" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'facturacion' %}TRANS_REALIZAR_ABONO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'facturacion' %}TRANS_FECHA_FACTURA_ABONO{% endtrans %}</label>
                    <input type="date" id="fechaAbonoFactura" class="form-control" />

                    <input type="hidden" id="idFacturaAbono" />
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnRealizarAbonoFactura">{% trans from 'messages' %}TRANS_REALIZAR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal realizar abono factura -->

    <!-- Modal generacion modelo347 -->
    <div id="modal_generate_modelo_347" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_IMPRIMIR_MODELO_347{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaModelo347" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasModelo347 is not empty %}
                            {% for lpm in listPlantillasModelo347 %}
                                <option value="{{ lpm.id }}">{{ lpm.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraModelo347">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion modelo347 -->

    <!-- Modal generacion manual vs -->
    <div id="modal_generate_manualvs" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_IMPRIMIR_MANUAL_VS{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'messages' %}TRANS_PLANTILLA{% endtrans %}</label>
                    <select id="plantillaManualVs" class="select-search form-control">
                        <option value=""></option>
                        {% if listPlantillasManualVs is not empty %}
                            {% for lpm in listPlantillasManualVs %}
                                <option value="{{ lpm.id }}">{{ lpm.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnGeneraManualVs">{% trans from 'messages' %}TRANS_IMPRIMIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal generacion manuval vs -->

    <!-- Modal añadir carpeta -->
    <div id="modal_añadir_carpeta" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'gdoc' %}TRANS_ADD_CARPETA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'gdoc' %}TRANS_NOMBRE_CARPETA{% endtrans %}</label>
                    <input type="text" id="nombreCarpeta" class="form-control" />

                    <label>{% trans from 'gdoc' %}TRANS_PADRE{% endtrans %}</label>
                    <select id="carpetaPadre" class="select-search form-control">
                        <option value=""></option>
                        {% if carpetas is not empty %}
                            {% for c in carpetas %}
                                <option value="{{ c.id }}">{{ c.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                </div>

                <div class="modal-footer">
                    {% if app.session.get('privilegiosRol').addGdocSn is defined and app.session.get('privilegiosRol').addGdocSn is not null %}
                        {% if app.session.get('privilegiosRol').addGdocSn %}
                            <button type="button" class="btn bg-primary" id="btnAddCarpeta">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <!-- Modal añadir carpeta -->

    <!-- Modal editar carpeta -->
    <div id="modal_editar_carpeta" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'gdoc' %}TRANS_EDIT_CARPETA{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'gdoc' %}TRANS_NOMBRE_CARPETA{% endtrans %}</label>
                    <input type="text" id="nombreCarpetaEditar" class="form-control" />

                    <label>{% trans from 'gdoc' %}TRANS_PADRE{% endtrans %}</label>
                    <select id="carpetaPadreEditar" class="select-search form-control">
                        <option value=""></option>
                        {% if carpetas is defined and carpetas is not empty %}
                            {% for c in carpetas %}
                                <option value="{{ c.id }}">{{ c.nombre }}</option>
                            {% endfor %}
                        {% endif %}
                    </select>

                    <input type="hidden" id="idCarpeta" class="form-control" />

                </div>

                <div class="modal-footer">
                    {% if app.session.get('privilegiosRol').editGdocSn is defined and app.session.get('privilegiosRol').editGdocSn is not null %}
                        {% if app.session.get('privilegiosRol').editGdocSn %}
                            <button type="button" class="btn bg-primary" id="btnUpdateCarpeta">Guardar</button>
                        {% endif %}
                    {% endif %}
                    {% if app.session.get('privilegiosRol').deleteGdocSn is defined and app.session.get('privilegiosRol').deleteGdocSn is not null %}
                        {% if app.session.get('privilegiosRol').deleteGdocSn %}
                            <button type="button" class="btn bg-danger" id="btnDeleteCarpeta">Eliminar</button>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <!-- Modal editar carpeta -->

    <!-- Modal view fichero -->
    <div id="modal_view_fichero" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'gdoc' %}TRANS_DATOS_FICHERO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans from 'gdoc' %}TRANS_NOMBRE_FICHERO{% endtrans %}</label>
                    <input type="text" id="nombreFichero" class="form-control" disabled="disabled" />

                    <label>{% trans from 'gdoc' %}TRANS_FECHA_FICHERO{% endtrans %}</label>
                    <input type="text" id="fechaFichero" class="form-control" disabled="disabled" />

                    <label>{% trans from 'gdoc' %}TRANS_NOMBRE_USUARIO_FICHERO{% endtrans %}</label>
                    <input type="text" id="usuarioFichero" class="form-control" disabled="disabled" />

                    <label>{% trans from 'gdoc' %}TRANS_TIPO_FICHERO{% endtrans %}</label>
                    <input type="text" id="tipoFichero" class="form-control" disabled="disabled" />

                    <label>{% trans from 'gdoc' %}TRANS_MIDA_FICHERO{% endtrans %}</label>
                    <input type="text" id="midaFichero" class="form-control" disabled="disabled" />

                    <input type="hidden" id="idFichero" class="form-control" />

                </div>

                <div class="modal-footer">
                    {% if app.session.get('privilegiosRol').openGdocFileSn is defined and app.session.get('privilegiosRol').openGdocFileSn is not null %}
                        {% if app.session.get('privilegiosRol').openGdocFileSn %}
                            {% if app.session.get('empresa') is defined and app.session.get('empresa') is not null %}
                                <a href="#" id="btnOpenPlantilla" class="btn btn-labeled btn-labeled-left bg-primary" target="_blank">{% trans from 'messages' %}TRANS_OPEN{% endtrans %}<b><i class="icon-file-eye"></i></b></a>
                            {% else %}
                                <a href="#" class="btn btn-labeled btn-labeled-left bg-primary noEmpresa">{% trans from 'messages' %}TRANS_OPEN{% endtrans %}<b><i class="icon-file-eye"></i></b></a>
                            {% endif %}
                        {% endif %}
                    {% endif %}

                    {% if app.session.get('privilegiosRol').downGdocFileSn is defined and app.session.get('privilegiosRol').downGdocFileSn is not null %}
                        {% if app.session.get('privilegiosRol').downGdocFileSn %}
                            <a href="#" id="btnDownPlantilla" class="btn btn-labeled btn-labeled-left bg-success" target="_blank">{% trans from 'messages' %}TRANS_DOWN{% endtrans %}<b><i class="icon-file-download"></i></b></a>
                        {% endif %}
                    {% endif %}

                    {% if app.session.get('privilegiosRol').deleteGdocFileSn is defined and app.session.get('privilegiosRol').deleteGdocFileSn is not null %}
                        {% if app.session.get('privilegiosRol').deleteGdocFileSn %}
                            <button type="button" class="btn btn-labeled btn-labeled-left bg-danger" id="btnDeletePlantilla">{% trans from 'messages' %}TRANS_ELIMINAR{% endtrans %}<b><i class="icon-cross2"></i></b></button>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <!-- Modal view fichero -->

    <!-- Modal añadir fichero -->
    <div id="modal_añadir_fichero" class="modal fade" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'gdoc' %}TRANS_AÑADIR_FICHERO{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    {% if form2 is defined and form2 is not empty %}
                    {{ form_start(form2) }}

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form2.nombre) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form2.media) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form2.carpeta) }}
                        </div>
                    </div>
                    {{ form_end(form2) }}
                </div>

                <div class="modal-footer">
                    {% if app.session.get('privilegiosRol').addGdocSn is defined and app.session.get('privilegiosRol').addGdocSn is not null %}
                        {% if app.session.get('privilegiosRol').addGdocSn %}
                            {{ form_row(form2.guardar) }}
                        {% else %}
                            {{ form_row(form2.guardar, {'attr': {'style': 'display: none;'}}) }}
                        {% endif %}
                    {% else %}
                        {{ form_row(form2.guardar, {'attr': {'style': 'display: none;'}}) }}
                    {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    <!-- Modal añadir fichero -->

    <!-- Modal import trabajador -->
    <div id="modal_import_trabajador" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans from 'trabajadores' %}TRANS_IMPORTAR_TRABAJADORES{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">

                    {% if form3 is defined and form3 is not empty %}

                    {{ form_start(form3) }}

                    {{ form_row(form3.fichero) }}

                    <div class="alert alert-info bg-white alert-styled-left alert-arrow-left alert-dismissible">
                        {% trans from 'trabajadores' %}TRANS_PROCESO_DURACION{% endtrans %}
                    </div>

                </div>

                <div class="modal-footer">
                    {% if app.session.get('privilegiosRol').importTrabajadorSn is defined and app.session.get('privilegiosRol').importTrabajadorSn is not null %}
                        {% if app.session.get('privilegiosRol').importTrabajadorSn %}
                            {{ form_row(form3.importar) }}
                        {% else %}
                            {{ form_row(form3.importar, {'attr': {'style': 'display: none;'}}) }}
                        {% endif %}
                    {% else %}
                        {{ form_row(form3.importar, {'attr': {'style': 'display: none;'}}) }}
                    {% endif %}
                </div>

                {{ form_end(form3) }}
                {% endif %}
            </div>
        </div>
    </div>
    <!-- /Modal import trabajador -->

    <!-- Modal añadir trabajador -->
    <div id="modal_añadir_trabajador" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">{% trans %}TRANS_ASIGNAR_TRABAJADOR{% endtrans %}</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <div class="modal-body">
                    <label>{% trans %}TRANS_TRABAJADOR{% endtrans %}</label>
                    <select id="trabajadorEmpresa" class="form-control js_busca_ajax_trabajador" data-fouc>
                    </select>

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn bg-primary" id="btnAddTrabajador">{% trans from 'messages' %}TRANS_AÑADIR{% endtrans %}</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /Modal añadir trabajador -->
{% endblock %}