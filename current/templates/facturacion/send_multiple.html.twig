{% extends 'theme/template.html.twig' %}
{% trans_default_domain 'messages' %}

{% block title %} {% trans %}TRANS_ENVIAR_CORREO{% endtrans %} {% endblock %}
{% block subtitle %} {% endblock %}

{% block actions %}
{% endblock %}

{% block card %}

    <style>
        .custom-file-label { opacity: 0; }
        .custom-file-input { opacity: 1; }
    </style>

    <script type="text/javascript">
        $(document).ready(function () {

            $('#enviar_factura_multiple_plantilla').change(function(){
                var val = $(this).val();
                $.ajax({
                    type: "POST",
                    url: "{{ path('gdoc_recuperar_texto_plantilla') }}",
                    data: {
                        'plantillaId': val,
                    },
                    dataType: "JSON",
                    success: function (data) {
                        if(data != null){
                            $('#enviar_factura_multiple_mensaje').val(data.texto);
                        }
                    },
                    error: function(){
                        new PNotify({
                            title: 'Ops!',
                            text: '{% trans from "messages" %}TRANS_AVISO_ERROR{% endtrans %}',
                            icon: 'icon-blocked',
                            type: 'error'
                        });

                    }
                });

            });

        });
    </script>

    {% for message in app.flashes('danger') %}
        <div class="alert alert-danger bg-white alert-styled-left alert-arrow-left alert-dismissible">
            <button type="button" class="close" data-dismiss="alert"><span>Ã—</span></button>
            {{ message }}
        </div>
    {% endfor %}

    <div class="card">
        <div class="card-body">

            <div class="alert alert-info bg-white alert-styled-left alert-arrow-left alert-dismissible">
                {% trans %}TRANS_AVISO_MULTIPLE_CORREO{% endtrans %} <strong>;</strong>
            </div>

            {{ form_start(form) }}

            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.cc) }}
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.cco) }}
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.asunto) }}
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.plantilla) }}
                </div>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    {{ form_row(form.mensaje, {'attr': {'style': 'height: 200px;'}}) }}
                </div>
            </div>

            <div class="card-footer d-flex justify-content-between align-items-center border-top-0">
                {{ form_row(form.enviar) }}
            </div>

            {{ form_end(form) }}

        </div>
    </div>
{% endblock %}




