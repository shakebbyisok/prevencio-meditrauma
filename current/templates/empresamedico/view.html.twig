{% extends 'theme/template.html.twig' %}
{% trans_default_domain 'empresas' %}

{% block arrow %}<a href="{{ path('tecnico_empresa_show') }}" style="color: black;" onclick="return confirm('{% trans from 'messages' %}TRANS_CONFIRM_RETURN{% endtrans %}')"><i class="icon-arrow-left52 mr-2"></i></a>{% endblock %}
{% block title %} {% trans %}TRANS_EMPRESA{% endtrans %} {% endblock %}
{% block subtitle %}
    {% if (app.request.get('id') is defined and app.request.get('id') is not empty ) %}
        {{ form.vars.value.empresa }}
    {% else %}
        {% trans from 'messages' %}TRANS_NUEVA{% endtrans %}
    {% endif %}
{% endblock %}

{% block card %}
    <link href="{{ asset('jstree/themes/default/style.min.css') }}" rel="stylesheet" type="text/css">
    <script src="{{ asset('jstree/jstree.min.js') }}"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            $('.summernote').summernote();
            $(".note-editable").attr("contenteditable","false");

            var arrayDataTrabajadores = [];
            var arrayDataMemorias = [];
            var arrayDataEstudios = [];
            var arrayDataRevisiones = [];

            $.extend( $.fn.dataTable.defaults, {
                autoWidth: true,
                columnDefs: [{
                    width: 100,
                }],
                ordering: true,
                deferRender: false,
                dom: '<"datatable-header"fBl><"datatable-scroll-wrap"t><"datatable-footer"ip>',
                language: {
                    search: '<span>Filtrar:</span> _INPUT_',
                    searchPlaceholder: 'Escriba para filtrar...',
                    lengthMenu: '<span>Mostrar:</span> _MENU_',
                    paginate: { 'first': 'First', 'last': 'Last', 'next': $('html').attr('dir') == 'rtl' ? '&larr;' : '&rarr;', 'previous': $('html').attr('dir') == 'rtl' ? '&rarr;' : '&larr;' }
                },
            });
            {% for te in trabajadoresEmpresa %}
                var array = [];
                var apto = '';

                {% if te.apto is not empty %}
                    {% if te.apto == 1 %}
                        apto = '<span class="badge badge-success"><i class="icon-check"></i></span>';
                    {% elseif te.apto == 2 %}
                        apto = '<span class="badge badge-warning"><i class="icon-check"></i></span>';
                    {% elseif te.apto == 3 %}
                        apto = '<span class="badge badge-danger"><i class="icon-cross"></i></span>';
                    {% endif %}
                {% else %}
                    apto = '';
                {% endif %}

                array.push('{{ te.trabajador }}', '{{ te.dni }}', '{{ te.puesto }}', '{{ te.fechaultima }}', apto);
                arrayDataTrabajadores.push(array);
            {% endfor %}

            $('.datatable-export-excel-trabajadores').DataTable({
                data: arrayDataTrabajadores,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });
            $('#datatable-trabajadores .dt-buttons').css('display', 'none');

            {% for me in memoriaEmpresa %}
                var array = [];

                array.push('{{ me.anyo }}');
                arrayDataMemorias.push(array);
            {% endfor %}

            $('.datatable-export-excel-memorias').DataTable({
                data: arrayDataMemorias,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            $('#datatable-memorias .dt-buttons').css('display', 'none');

            {% for e in estudioEmpresa %}
                var array = [];
                array.push('{{ e.anyo }}');
                arrayDataEstudios.push(array);
            {% endfor %}

            $('.datatable-export-excel-estudios').DataTable({
                data: arrayDataEstudios,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            $('#datatable-estudios .dt-buttons').css('display', 'none');

            {% for r in revisionEmpresa %}
                var array = [];

                var estado = '';
                {% if r.estadoid is not empty %}
                    {% if r.estadoid == 1 %}
                        estado = '<span class="badge badge-primary"><i class="icon-eye-blocked"></i> {{ r.estado }}</span>';
                    {% elseif r.estadoid == 2 %}
                        estado = '<span class="badge badge-warning"><i class="icon-eye"></i> {{ r.estado }}</span>';
                    {% elseif r.estadoid == 3 %}
                        estado = '<span class="badge badge-info"><i class="icon-highlight"></i> {{ r.estado }}</span>';
                    {% elseif r.estadoid == 4 %}
                        estado = '<span class="badge badge-success"><i class="icon-cash"></i> {{ r.estado }}</span>';
                    {% endif %}
                {% endif %}

                var apto = '';

                {% if r.apto_id is not empty %}
                    {% if r.apto_id == 1 %}
                        apto = '<span class="badge badge-success"><i class="icon-check"></i></span>';
                    {% elseif r.apto_id == 2 %}
                        apto = '<span class="badge badge-warning"><i class="icon-check"></i></span>';
                    {% elseif r.apto_id == 3 %}
                        apto = '<span class="badge badge-danger"><i class="icon-cross"></i></span>';
                    {% endif %}
                {% endif %}

                array.push(estado, '<span style="display:none;">{{ r.fechatimestamp }}</span>{{ r.fecha }}', '{{ r.trabajador }}', '{{ r.puesto }}', '{{ r.empresa }}', '{{ r.doctor }}', apto);
                arrayDataRevisiones.push(array);
            {% endfor %}

            $('.datatable-export-excel-revisiones').DataTable({
                data: arrayDataRevisiones,
                buttons: {
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            className: 'btn btn-success',
                            text: '<i class="icon-file-spreadsheet mr-2"></i> Exportar a Excel',
                            fieldSeparator: '\t',
                            extension: '.xlsx'
                        }
                    ]
                }
            });

            $('#datatable-revisiones .dt-buttons').css('display', 'none');

            var xhr;
            var json = {{ tree | raw }};
            var selected_id;

            function ControlViews() {
                selected_id = $("#tree").find(".jstree-clicked").attr('id');
                //Algun nodo selecionado.
                if (typeof selected_id != 'undefined' && selected_id != '') {
                    var remove = /_anchor$/;
                    selected_id = selected_id.replace(remove, "");
                    //FICHERO
                    if (selected_id.indexOf("fileId") == 0) {
                        selected_id = selected_id.replace("fileId", "");
                        plantillaAjaxRequest(selected_id);
                    }
                }
            }

            $(function () {
                $("#tree")
                    .jstree({
                        'core': {
                            'data': json,
                            'check_callback': true
                        },

                        'plugins': ["search", "sort", "state"]

                    })
                    .on('changed.jstree', function (e, data) {
                        if (xhr && xhr.readyState != 4) {
                            xhr.abort();
                        }
                        ControlViews();
                    })
                    .on('ready.jstree', function (e, data) {
                        var fileUploadedID = location.search.split('fileid=')[1];
                        //console.log(fileUploadedID);
                        if (typeof(fileUploadedID) != "undefined") {
                            var node = "fileId" + fileUploadedID;
                            $('#tree').jstree('deselect_all');
                            setTimeout(function(){
                                $('#tree').jstree('select_node', node);
                            },300);

                        }
                    });
            });

            ControlViews();

            function plantillaAjaxRequest(plantillaId) {

                $("#nombreFichero").val("");
                $("#fechaFichero").val("");
                $("#usuarioFichero").val("");
                $("#tipoFichero").val("");
                $("#midaFichero").val("");
                $("#idFichero").val("");
                $("#btnDownPlantilla").attr('href', "");
                $("#btnOpenPlantilla").attr('href', "");

                $('#modal_view_fichero').modal('show');

                var url = '{{ path('gdoc_plantilla_view') }}';

                $("#btnOpenPlantilla").hide();
                $("#btnDownPlantilla").hide();
                $('#btnDeletePlantilla').hide();

                var empresaId = '{{ app.request.get('id') }}';

                xhr = $.ajax({
                    type: 'POST',
                    url: url,
                    data: {
                        'id': plantillaId,
                        'tipo': 3,
                        'empresaId': '{{ app.request.get('id') }}'
                    },
                    dataType: 'json',
                    success: function (response) {
                        $("#nombreFichero").val(response.name);
                        $("#fechaFichero").val(response.fecha);
                        $("#usuarioFichero").val(response.usuario);
                        $("#tipoFichero").val(response.tipo);
                        $("#midaFichero").val(response.mida);
                        $("#idFichero").val(response.id);
                        $("#btnDownPlantilla").attr('href', '{{ path('gdoc_down_plantilla') }}?plantillaId='+response.down+'&tipo=3&empresaId='+empresaId);
                        $("#btnDownPlantilla").show();
                    }
                });
            }

            // $('.form-check-input-switch').bootstrapSwitch();
        });

    </script>

    {% for message in app.flashes('success') %}
        <div class="alert alert-success bg-white alert-styled-left alert-arrow-left alert-dismissible">
            <button type="button" class="close" data-dismiss="alert"><span>×</span></button>
            {{ message }}
        </div>
    {% endfor %}

    <div class="card">
        <div class="card-body">

            {{ form_start(form) }}

            <ul class="nav nav-tabs nav-tabs-highlight">

                {% if (app.request.get('id') is defined and app.request.get('id') is not empty ) %}
                    <li class="nav-item"><a href="#tab1" class="nav-link active" data-toggle="tab">{% trans %}TRANS_MENU_1{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab2" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_15{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab3" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_5{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab4" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_6{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab5" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_7{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab6" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_16{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab7" class="nav-link" data-toggle="tab">{% trans %}TRANS_MENU_17{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab8" class="nav-link" data-toggle="tab">{% trans from 'revision' %}TRANS_REVISIONES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#tab9" class="nav-link" data-toggle="tab">{% trans %}TRANS_GESTION_DOCUMENTAL{% endtrans %}</a></li>
                {% else %}
                    <li class="nav-item"><a href="#tab1" class="nav-link active" data-toggle="tab">{% trans %}TRANS_MENU_1{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_15{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_5{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_6{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_7{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_16{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_MENU_17{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans from 'revision' %}TRANS_REVISIONES{% endtrans %}</a></li>
                    <li class="nav-item"><a href="#" class="nav-link" onclick="alert('{% trans from "messages" %}TRANS_MSG_GUARDAR_ANTES{% endtrans %}');">{% trans %}TRANS_GESTION_DOCUMENTAL{% endtrans %}</a></li>
                {% endif %}

            </ul>

            <div class="tab-content">
                <div class="tab-pane fade active show" id="tab1">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.anulado) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.pruebasEspeciales) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4">
                            {{ form_row(form.estadoAdministrativoVigilanciaSalud) }}
                        </div>
                        <div class="col-lg-4">
                            {{ form_row(form.codigo) }}
                        </div>
                        <div class="col-lg-4">
                            {{ form_row(form.idioma) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4">
                            {{ form_row(form.cif) }}
                            <span class="form-text text-danger incorrectoCif" style="display: none;">{% trans %}TRANS_ERROR_CIF{% endtrans %}</span>
                        </div>
                        <div class="col-lg-4">
                            {{ form_row(form.empresa) }}
                        </div>
                        <div class="col-lg-4">
                            {{ form_row(form.marcaComercial) }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-4">
                            {{ form_row(form.grupoEmpresa) }}
                        </div>
                        <div class="col-lg-4">
                            {{ form_row(form.logo) }}
                            {% if logo is defined and logo is not empty %}
                                <label style="font-weight: bolder;">{% trans %}TRANS_LOGO_ACTUAL{% endtrans %}</label>
                                <img src="../../../upload/media/logos/{{ logo }}" width="255px" />
                            {% endif %}
                        </div>
                    </div>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_OTROS_DATOS_INTERES{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.colaborador) }}
                                {{ form_row(form.mutua) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.spa) }}
                                {{ form_row(form.prescriptor) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.modalidadPreventiva) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_TELEFONO_EMAIL{% endtrans %}</legend>

                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.telefono1) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.telefono2) }}
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="correos">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_EMAIL{% endtrans %}</th>
                                            <th>{% trans %}TRANS_FUNCION_EMAIL{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if correos is not empty %}
                                            {% for c in correos %}
                                                <tr>
                                                    <td>{{ c.correo }}</td>
                                                    {% if c.funcion is not null %}
                                                        <td>{{ c.funcion.descripcion }}</td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="3" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_DIRECCION_POSTAL{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-3">
                                {{ form_row(form.domicilioPostal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.localidadPostal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.codigoPostalPostal) }}
                            </div>
                            <div class="col-lg-3">
                                {{ form_row(form.provinciaPostal) }}
                            </div>
                        </div>

                        <h5>{% trans %}TRANS_CODIGO_SERPA{% endtrans %}</h5>

                        <div class="row">
                            <div class="col-lg-6">
                                {{ form_row(form.provinciaPostalSerpa) }}
                            </div>
                            <div class="col-lg-6">
                                {{ form_row(form.municipioPostalSerpa) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_CNAE{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="cnae">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_PRINCIPAL_CNAE{% endtrans %}</th>
                                            <th>{% trans %}TRANS_CODIGO_CNAE{% endtrans %}</th>
                                            <th>{% trans %}TRANS_DESCRIPCION_CNAE{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if cnae is not empty %}
                                            {% for c in cnae %}
                                                <tr>
                                                    {% if c.principal == true %}
                                                        <td><span class="badge badge-flat border-success text-success-600"><i class="icon-checkmark2"></i></span></td>
                                                    {% else %}
                                                        <td><span class="badge badge-flat border-danger text-danger-600"><i class="icon-cross3"></i></span></td>
                                                    {% endif %}
                                                    {% if c.cnae is not null %}
                                                        <td>{{ c.cnae.cnae }}</td>
                                                        <td>{{ c.cnae.descripcion }}</td>
                                                    {% else %}
                                                        <td></td>
                                                        <td></td>
                                                    {% endif %}
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="3" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="tab-pane fade" id="tab2">
                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_USUARIOS_RESPONSABLES{% endtrans %}</legend>

                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.agente) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.vigilanciaSalud) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.gestorAdministrativo) }}
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="table-bordered">
                                    <table class="table" id="tecnicos">
                                        <thead>
                                        <tr class="bg-grey-300">
                                            <th>{% trans %}TRANS_TECNICO{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if tecnicos is not empty %}
                                            {% for t in tecnicos %}
                                                <tr>
                                                    {% if t.tecnico is not null %}
                                                        <td>{{ t.tecnico.nombre }}</td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            <tr>
                                                <td colspan="1" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                            </tr>
                                        {% endif %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_RESPONSABLE_EMPRESA{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-4">
                                {{ form_row(form.nombreRepresentante) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.dniRepresentante) }}
                            </div>
                            <div class="col-lg-4">
                                {{ form_row(form.cargoRepresentante) }}
                            </div>
                        </div>
                    </fieldset>

                    <fieldset>
                        <legend class="text-uppercase font-size-sm font-weight-bold">{% trans %}TRANS_PERSONAS_CONTACTO{% endtrans %}</legend>
                        <div class="row">
                            <div class="col-lg-12">
                                {{ form_row(form.personaContacto) }}
                            </div>
                        </div>
                    </fieldset>
                </div>

                <div class="tab-pane fade" id="tab3">
                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesGenerales) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesAreaMedicina) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.observacionesAreaTecnica) }}
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12">
                            {{ form_row(form.pruebasComplementarias) }}
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab4">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="table-bordered">
                                <table class="table" id="centroTrabajoEmpresa">
                                    <thead>
                                    <tr class="bg-grey-300">
                                        <th>{% trans %}TRANS_NOMBRE{% endtrans %}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% if centroTrabajoEmpresa is not empty %}
                                        {% for cte in centroTrabajoEmpresa %}
                                            <tr>
                                                <td>{{ cte.centro.nombre }}</td>
                                            </tr>
                                        {% endfor %}
                                    {% else %}
                                        <tr>
                                            <td colspan="1" align="center">{% trans from 'messages' %}TRANS_SIN_REGISTROS{% endtrans %}</td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab5">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-trabajadores" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-trabajadores dataTable no-footer" id="trabajadoresEmpresa" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Nombre" aria-sort="ascending">{% trans %}TRANS_NOMBRE{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="DNI">{% trans %}TRANS_DNI_RESPONSABLE_EMPRESA{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Puesto">{% trans from 'revision' %}TRANS_PUESTO_TRABAJO{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="UltimaRevision">{% trans from 'trabajadores' %}TRANS_FECHA_ULTIMA_REVISION{% endtrans %}
                                            </th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Apto">{% trans from 'revision' %}TRANS_APTO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab6">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-memorias" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-memorias dataTable no-footer" id="memoriasEmpresa" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Anyo" aria-sort="ascending">{% trans %}TRANS_AÑO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab7">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-estudios" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-estudios dataTable no-footer" id="estudiosEmpresa" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1"
                                                aria-label="Anyo" aria-sort="ascending">{% trans %}TRANS_AÑO{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab8">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="datatable-revisiones" class="dataTables_wrapper no-footer">
                                <div class="datatable-scroll">
                                    <table class="table datatable-export-excel-revisiones dataTable no-footer" id="memoriasEmpresa" role="grid" aria-describedby="DataTables_Table_0_info" style="width: 100% !important;">
                                        <thead>
                                        <tr class="bg-grey-300" role="row">
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Estado">{% trans from 'revision' %}TRANS_ESTADO{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Fecha">{% trans from 'revision' %}TRANS_FECHA{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Trabajador">{% trans from 'revision' %}TRANS_TRABAJADOR{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="PuestoTrabajo">{% trans from 'revision' %}TRANS_PUESTO_TRABAJO{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Empresa">{% trans from 'revision' %}TRANS_EMPRESA{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Doctor">{% trans from 'revision' %}TRANS_MEDICO{% endtrans %}</th>
                                            <th class="sorting" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" aria-label="Apto">{% trans from 'revision' %}TRANS_APTO{% endtrans %}</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="tab9">
                    <div class="row">
                        <div class="col-lg-12">
                            <div id="tree" style="border: 1px solid #DDD; border-radius: 5px; padding:20px; margin:0 auto;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card-footer d-flex justify-content-between align-items-center border-top-0">
            {% if app.session.get('privilegiosRol').editEmpresaMedicoSn is defined and app.session.get('privilegiosRol').editEmpresaMedicoSn is not null %}
                {% if app.session.get('privilegiosRol').editEmpresaMedicoSn %}
                    {{ form_row(form.guardar) }}
                {% else %}
                    {{ form_row(form.guardar, {'attr': {'style': 'display: none;'}}) }}
                {% endif %}
            {% else %}
                {{ form_row(form.guardar, {'attr': {'style': 'display: none;'}}) }}
            {% endif %}
        </div>

        {{ form_end(form) }}
    </div>

{% endblock %}



